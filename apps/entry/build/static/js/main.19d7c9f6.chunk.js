(this["webpackJsonpamr-entry"]=this["webpackJsonpamr-entry"]||[]).push([[0],{104:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"App",{enumerable:!0,get:function(){return r.App}}),Object.defineProperty(t,"ButtonRow",{enumerable:!0,get:function(){return n.ButtonRow}}),Object.defineProperty(t,"CardSection",{enumerable:!0,get:function(){return o.CardSection}}),Object.defineProperty(t,"DeleteModal",{enumerable:!0,get:function(){return i.DeleteModal}}),Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return l.Event}}),Object.defineProperty(t,"IconButton",{enumerable:!0,get:function(){return s.IconButton}}),Object.defineProperty(t,"LoadingSection",{enumerable:!0,get:function(){return c.LoadingSection}}),Object.defineProperty(t,"MainSection",{enumerable:!0,get:function(){return u.MainSection}}),Object.defineProperty(t,"MetadataLoader",{enumerable:!0,get:function(){return d.MetadataLoader}}),Object.defineProperty(t,"ModalPopup",{enumerable:!0,get:function(){return p.ModalPopup}}),Object.defineProperty(t,"OverlayedLoader",{enumerable:!0,get:function(){return E.OverlayedLoader}}),Object.defineProperty(t,"Panel",{enumerable:!0,get:function(){return f.Panel}}),Object.defineProperty(t,"RichButton",{enumerable:!0,get:function(){return m.RichButton}}),Object.defineProperty(t,"Table",{enumerable:!0,get:function(){return g.Table}}),Object.defineProperty(t,"TitleRow",{enumerable:!0,get:function(){return b.TitleRow}});var r=a(542),n=a(773),o=a(776),i=a(777),l=a(778),s=a(808),c=a(394),u=a(809),d=a(810),p=a(811),E=a(398),f=a(814),m=a(393),g=a(817),b=a(832)},12:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={store:!0};Object.defineProperty(t,"store",{enumerable:!0,get:function(){return u.store}});var n=a(95);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=a(156);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=a(104);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var l=a(213);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var s=a(215);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var c=a(833);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var u=a(839),d=a(843);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}))},129:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showAlert=t.removeAlert=void 0;var r=a(96),n=a(66);t.showAlert=function(e){let{success:t=!1,warning:a=!1,critical:o=!1,permanent:i=!1,actions:l=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s=>s((0,r.createAction)(n.ADD_ALERT,{content:e,success:t,warning:a,critical:o,permanent:i,actions:l}))};t.removeAlert=e=>t=>t((0,r.createAction)(n.REMOVE_ALERT,e))},130:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SUCCESS=t.READY=t.LOADING=t.ERROR=void 0;t.LOADING="LOADING";t.READY="READY";t.ERROR="ERROR";t.SUCCESS="SUCCESS"},138:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.MinWidth=void 0;const n=r(a(18)).default.div`
    min-width: 268px;
`;t.MinWidth=n},156:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={initMetadata:!0,getRecord:!0,getAllEvents:!0,getPersonVal:!0};Object.defineProperty(t,"getAllEvents",{enumerable:!0,get:function(){return l.getAllEvents}}),Object.defineProperty(t,"getPersonVal",{enumerable:!0,get:function(){return l.getPersonVal}}),Object.defineProperty(t,"getRecord",{enumerable:!0,get:function(){return i.getRecord}}),Object.defineProperty(t,"initMetadata",{enumerable:!0,get:function(){return o.initMetadata}});var n=a(483);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=a(529),i=a(292),l=a(294)},157:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DUPLICATE_WARNING=t.DUPLICATE_ERROR=t.DUPLICATE_CHECKING=void 0;t.DUPLICATE_ERROR="A different record exists with the same lab sample ID";t.DUPLICATE_WARNING="A different record exists for the same person with the same lab sample ID";t.DUPLICATE_CHECKING="CHECKING"},213:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(530);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var n=a(86);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=a(157);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=a(531);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var l=a(214);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var s=a(532);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var c=a(130);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}))},214:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REQUIRED_EMPTY=t.INVALID_FIELD=void 0;t.REQUIRED_EMPTY="A required field is empty";t.INVALID_FIELD="A field is invalid"},215:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"entityRules",{enumerable:!0,get:function(){return r.entityRules}}),Object.defineProperty(t,"eventRules",{enumerable:!0,get:function(){return n.eventRules}}),Object.defineProperty(t,"getRules",{enumerable:!0,get:function(){return o.getRules}});var r=a(533),n=a(534),o=a(535)},254:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.Padding=void 0;const n=r(a(18)).default.div`
    padding: 16px;
`;t.Padding=n},255:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.Row=void 0;const n=r(a(18)).default.div`
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
`;t.Row=n},256:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Label=void 0;var r=a(1),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=n?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(18)),o=a(32);function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}const l=n.default.div`
    color: ${o.colors.grey600};
    white-space: nowrap;
    padding-bottom: 12px;
    line-height: 24px;
    font-weight: 500;
    ${e=>{let{required:t}=e;return t&&n.css`
            ::after {
                content: '*';
                padding-left: 4px;
            }
        `}}
`;t.Label=l,l.propTypes={required:r.bool}},292:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRecord=void 0;var r=a(293),n=a(495);t.getRecord=async(e,t,a)=>{const{eventValues:o,programId:i,programStageId:l,completed:s,entityId:c,sampleDate:u}=await(0,n.getEventValues)(t),d=e.find(e=>e.id===i).programStages.find(e=>e.id==l),{programStage:p,eventValues:E,status:f}=await(0,r.getProgramStage)(d,o,{completed:s,newRecord:!1,isIsolate:a});return{program:i,programStage:p,eventValues:E,status:f,eventId:t,entityId:c,sampleDate:u}}},293:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"generateAmrId",{enumerable:!0,get:function(){return r.generateAmrId}}),Object.defineProperty(t,"getProgramStage",{enumerable:!0,get:function(){return n.getProgramStage}}),Object.defineProperty(t,"setEventValues",{enumerable:!0,get:function(){return o.setEventValues}});var r=a(491),n=a(493),o=a(494)},294:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPersonVal=t.getAllEvents=void 0;var r=a(36);t.getAllEvents=async(e,t)=>{var a=`events.json?orgUnit=${e}&trackedEntityInstance=${t}&paging=false`;return await(0,r.get)(a)};t.getPersonVal=async e=>await(0,r.get)(request("trackedEntityInstances/"+e+".json",{fields:""}))},36:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"del",{enumerable:!0,get:function(){return r.del}}),Object.defineProperty(t,"deleteEvent",{enumerable:!0,get:function(){return s.deleteEvent}}),Object.defineProperty(t,"deleteTEI",{enumerable:!0,get:function(){return c.deleteTEI}}),Object.defineProperty(t,"get",{enumerable:!0,get:function(){return r.get}}),Object.defineProperty(t,"getEvent",{enumerable:!0,get:function(){return o.getEvent}}),Object.defineProperty(t,"post",{enumerable:!0,get:function(){return r.post}}),Object.defineProperty(t,"postDataElement",{enumerable:!0,get:function(){return u.postDataElement}}),Object.defineProperty(t,"postEvent",{enumerable:!0,get:function(){return i.postEvent}}),Object.defineProperty(t,"put",{enumerable:!0,get:function(){return r.put}}),Object.defineProperty(t,"putEvent",{enumerable:!0,get:function(){return l.putEvent}}),Object.defineProperty(t,"request",{enumerable:!0,get:function(){return n.request}});var r=a(97),n=a(484),o=a(485),i=a(486),l=a(487),s=a(488),c=a(489),u=a(490)},393:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.RichButton=void 0;var n,o=r(a(0)),i=a(1),l=a(32),s=a(93);const c=e=>{let{primary:t,secondary:a,destructive:r,onClick:i,disabled:c,loading:u,icon:d,small:p,large:E,initialFocus:f,label:m}=e;return o.default.createElement(l.Button,{primary:t,secondary:a,destructive:r,onClick:i,disabled:c||u,icon:u?n||(n=o.default.createElement(s.LoadingIcon,null)):d&&o.default.createElement(s.Icon,{icon:s.icons[d]}),small:p,large:E,initialFocus:f},m)};t.RichButton=c,c.propTypes={primary:i.bool,secondary:i.bool,destructive:i.bool,onClick:i.func.isRequired,disabled:i.bool,loading:i.bool,icon:i.string,small:i.bool,large:i.bool,initialFocus:i.bool,label:i.string.isRequired}},394:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingSection=void 0;var n,o=r(a(0)),i=r(a(18)),l=a(32);const s=(0,i.default)(l.Card)`
    display: flex !important;
    justify-content: center;
    align-items: center;
    margin-bottom: 16px;
    padding: 16px;
    height: unset !important;
`;t.LoadingSection=()=>n||(n=o.default.createElement(s,null,o.default.createElement(l.CircularLoader,null)))},395:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.DataElement=void 0;var n=r(a(0)),o=a(9),i=a(1),l=a(254),s=a(86),c=a(94),u=a(95),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(157));function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}const E=e=>{let{id:t}=e;const a=(0,o.useDispatch)(),r=(0,o.useSelector)(e=>e.metadata.optionSets),i=(0,o.useSelector)(e=>e.data.event.status.completed);var p=(0,o.useSelector)(e=>e.data.event.values[t]);const E=(0,o.useSelector)(e=>e.data.panel.program),f=(0,o.useSelector)(e=>e.data.event.programStage.dataElements[t].color),m=(0,o.useSelector)(e=>e.data.event.programStage.dataElements[t].disabled),g=(0,o.useSelector)(e=>e.data.event.programStage.dataElements[t].displayFormName),b=(0,o.useSelector)(e=>e.data.event.programStage.dataElements[t].error),v=(0,o.useSelector)(e=>e.data.event.programStage.dataElements[t].hide),y=(0,o.useSelector)(e=>e.data.event.programStage.dataElements[t].optionSet),O=(0,o.useSelector)(e=>e.data.event.programStage.dataElements[t].optionSetValue),h=(0,o.useSelector)(e=>e.data.event.programStage.dataElements[t].required),S=(0,o.useSelector)(e=>e.data.event.programStage.dataElements[t].valueType),_=(0,o.useSelector)(e=>e.data.event.programStage.dataElements[t].warning),T=t===s.SAMPLE_ID_ELEMENT&&s.SAMPLE_TESTING_PROGRAM[0].value==E&&(0,o.useSelector)(e=>e.data.event.duplicate),P=(e,t)=>{e==s.ORGANISM_DETECTED&&"Pathogens"==t?(a((0,u.AddAndSubmit)(!0)),a((0,u.setEventValue)(e,t,!1))):(a((0,u.AddAndSubmit)(!1)),a((0,u.setEventValue)(e,t,!1)))};return v?null:n.default.createElement(l.Padding,null,O?r[y].length<5?n.default.createElement(c.RadioInputs,{objects:r[y],name:t,label:g,value:p,onChange:P,required:h,disabled:m||i}):n.default.createElement(c.SelectInput,{objects:r[y],name:t,label:g,value:p,onChange:P,required:h,disabled:m||i}):"TRUE_ONLY"===S?n.default.createElement(c.SwitchInput,{name:t,label:g,checked:p,onChange:P,required:h,value:p,disabled:m||i}):"DATE"===S?n.default.createElement(c.DateInput,{name:t,label:g,value:p,required:h,onChange:P,disabled:m||i}):n.default.createElement(c.TextInput,{name:t,label:g,value:p,required:h,onChange:P,disabled:m||i,type:"NUMBER"===S?"number":"text",color:f,unique:t===s.SAMPLE_ID_ELEMENT,error:b||(t===s.SAMPLE_ID_ELEMENT&&T===d.DUPLICATE_ERROR?T:""),warning:_||(t===s.SAMPLE_ID_ELEMENT&&T===d.DUPLICATE_WARNING?T:""),loading:t===s.SAMPLE_ID_ELEMENT&&T===d.DUPLICATE_CHECKING}))};t.DataElement=E,E.propTypes={id:i.string.isRequired}},396:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.OptionSpacer=void 0;const n=r(a(18)).default.div`
    margin-right: 40px;
    &:last-child {
        margin-right: 0px;
    }
`;t.OptionSpacer=n},397:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.types=t.texts=t.statuses=void 0;t.types={VALUE_PROP:0,SET_VALUE:1,SET_ERROR:3,SET_VALIDATING:4};t.texts={required:"This field is required",unique:"This field requires a unique value",validate:"Validating"};t.statuses={default:"default",warning:"warning",error:"error"}},398:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayedLoader=void 0;var n,o=r(a(0)),i=r(a(18)),l=a(32);const s=i.default.div`
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
`;t.OverlayedLoader=()=>n||(n=o.default.createElement(s,null,o.default.createElement(l.CircularLoader,{large:!0})))},451:function(e,t,a){},467:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"OrgUnitTree",{enumerable:!0,get:function(){return r.OrgUnitTree}});var r=a(957)},475:function(e,t,a){e.exports=a(969)},480:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(481);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var n=a(536);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=a(537);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},481:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnique=t.setEntityValue=t.setEditing=t.setAggregationProgress=t.resetPreviousEntity=t.resetEntity=t.removeModal=t.getEntity=t.addPreviousEntity=t.addEntity=void 0;var n=r(a(11)),o=a(96),i=a(66),l=a(129),s=a(156),c=a(215);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.resetPreviousEntity=()=>e=>e((0,o.createAction)(i.RESET_PREVIOUS_ENTITY));t.addPreviousEntity=()=>(e,t)=>{const a=t().data.entity;e((0,o.createAction)(i.SET_PREVIOUS_ENTITY,{entity:a}))};t.addEntity=()=>(e,t)=>{const a=t().data.previousValues;e((0,o.createAction)(i.ADD_ENTITY,{previousValues:a}))};t.setAggregationProgress=e=>(t,a)=>{a();t((0,o.createAction)(i.AGGREGATION_ON_PROGRESS,e))};const p=e=>async(t,a)=>{t((0,o.createAction)(i.SET_MODAL_LOADING,!0));const r=a().metadata.optionSets,{trackedEntityTypeAttributes:n,rules:u}=a().metadata.person,d=a().data.entity.uniques;Object.keys(d).forEach(e=>d[e]=!0);try{const a=await(0,s.getPersonValues)(e);if(!a)throw"Failed to get person.";const[l,p]=(0,c.entityRules)(a,n,{rules:u,optionSets:r,uniques:{}});t((0,o.createAction)(i.SET_ENTITY,{values:l,id:e,valid:!0,attributes:p,uniques:d}))}catch(p){console.error(p),t((0,l.showAlert)("Failed to get person.",{critical:!0})),t((0,o.createAction)(i.SET_MODAL_LOADING,!1))}};t.getEntity=p;t.setEntityValue=(e,t)=>async(a,r)=>{const n=r().metadata.optionSets,u=r();var p=u.data.entity.editing,E=u.data.entity.id,f={};const[m,g,b]=(0,c.entityRules)(d(d({},u.data.entity.values),{},{[e]:t}),u.data.entity.attributes,{rules:u.metadata.person.rules,optionSets:n,uniques:u.data.entity.uniques});if(a((0,o.createAction)(i.SET_ENTITY_VALUE,{values:m,attributes:g,valid:b})),p){f[e]=t;await(0,s.updatePerson)(E,f);a((0,l.showAlert)("Updated successfully.",{success:!0}))}};t.validateUnique=(e,t,a)=>async(r,n)=>{const c=n().data;try{const n=await(0,s.checkUnique)(e,t,c.orgUnit.id);r(n?(0,o.createAction)(i.SET_ENTITY_MODAL_AND_UNIQUES,{modal:{id:e,label:a,entityId:n},uniques:d(d({},c.entity.uniques),{},{[e]:!n})}):(0,o.createAction)(i.SET_UNIQUE,{key:e,value:!n}))}catch(u){console.error(u),r((0,l.showAlert)("Failed to validate "+a,{critical:!0}))}};t.removeModal=e=>async(t,a)=>{const r=a().data.entity,n=d(d({},r.uniques),{},{[r.modal.id]:!!e});e?await t(p(r.modal.entityId)):t((0,o.createAction)(i.SET_ENTITY_MODAL_AND_UNIQUES,{modal:null,uniques:n}))};t.setEditing=()=>e=>{e((0,o.createAction)(i.SET_EDITING)),e((0,l.showAlert)("Fill entries now",{success:!0}))};t.resetEntity=()=>(e,t)=>{const a=t().metadata.person,r=t().metadata.optionSets,[n,l]=(0,c.entityRules)(a.values,a.trackedEntityTypeAttributes,{rules:a.rules,optionSets:r,uniques:{}});e((0,o.createAction)(i.SET_ENTITY,{values:n,id:null,valid:!1,uniques:{},attributes:l}))}},483:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.updatePerson=t.updateEventValue=t.setEventStatus=t.newRecord=t.isDuplicateRecord=t.getPersonValues=t.existingRecord=t.deletePerson=t.checkUnique=t.addPersonWithEvent=t.addPerson=t.addEvent=void 0;var n=r(a(11)),o=a(36),i=a(292),l=a(294),s=a(86),c=a(293);(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,a&&a.set(e,r)})(a(157)),r(a(128));function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const E=a(514);t.checkUnique=async(e,t,a)=>{const r=(await(0,o.get)((0,o.request)("trackedEntityInstances",{fields:"trackedEntityInstance",filters:`${e}:eq:${t}`,options:["ou="+a,"trackedEntityType="+s.PERSON_TYPE]}))).trackedEntityInstances;return!!r&&(r.length>0&&r[0].trackedEntityInstance)};const f=async e=>{const t=(await(0,o.get)((0,o.request)("trackedEntityInstances/"+e,{fields:"attributes[code,displayName,valueType,attribute,value]",options:["ouMode=ALL"]}))).attributes;if(!t)return null;const a={};return t.forEach(e=>a[e.attribute]=e.value),a};t.getPersonValues=f;t.addPerson=async(e,t)=>{const a={trackedEntityType:s.PERSON_TYPE,orgUnit:t,attributes:[]};for(const r in e)a.attributes.push({attribute:r,value:e[r]});return(await(await(0,o.post)("trackedEntityInstances",a)).json()).response.importSummaries[0].reference};const m=async(e,t)=>{const a="trackedEntityInstances/"+e,r=await(0,o.get)(a);r.attributes=[];for(const n in t)r.attributes.push({attribute:n,value:t[n]});await(0,o.put)(a,r)};t.updatePerson=m;t.deletePerson=async e=>await(0,o.del)("trackedEntityInstances/"+e);t.newRecord=async(e,t,a,r)=>{let{orgaCode:n,ou:o,eId:i,eValues:l,sampleDate:u,orgUnitCode:d}=a;const p={[s.ORGANISM_ELEMENT]:n,[s.AMR_ELEMENT]:await(0,c.generateAmrId)(o,d)},{entityId:E,eventId:f}=i?await b(p,e,{programStageId:t.id,orgUnitId:o,entityId:i,entityValues:l,sampleDate:u},r):await g(p,e,{programStageId:t.id,orgUnitId:o,entityValues:l,sampleDate:u}),{programStage:m,eventValues:v,status:y}=await(0,c.getProgramStage)(t,p,{completed:!1});return{programStage:m,eventValues:v,status:y,eventId:f,entityId:E}};t.existingRecord=async(e,t,a,r)=>{const n=await(0,l.getAllEvents)(t,a);var o=n.events;if(void 0===r){if(n.events.length>0)var s=n.events[0].event,c=await(0,i.getRecord)(e,s)}else c=await(0,i.getRecord)(e,r);if(void 0!=a)var u=await f(a);return p(p({eventList:o},c),{},{entityValues:u})};const g=async(e,t,a)=>{let{programStageId:r,orgUnitId:n,entityValues:i,sampleDate:l}=a;const u=await(0,c.setEventValues)({dataValues:[],eventDate:l,orgUnit:n,program:t,programStage:r,status:"ACTIVE"},e,{}),d=(s.PERSON_TYPE,u.orgUnit,Object.keys(i).map(e=>({attribute:e,value:i[e]})),u.orgUnit,u.program,{trackedEntityType:s.PERSON_TYPE,orgUnit:u.orgUnit,program:u.program,attributes:Object.keys(i).map(e=>({attribute:e,value:i[e]}))}),p=await(0,o.post)("trackedEntityInstances",d),E={orgUnit:u.orgUnit,status:"ACTIVE",trackedEntityInstance:p.response.importSummaries[0].reference,trackedEntityType:s.PERSON_TYPE,program:u.program,enrollmentDate:l,incidentDate:l},f=await(0,o.post)("enrollments",E);var m="",g="";f.response&&(m=f.response.importSummaries[0].reference),p.response&&(g=p.response.importSummaries[0].reference);const b=await(0,c.setEventValues)({dataValues:[],eventDate:l,orgUnit:n,program:t,programStage:r,enrollment:m,trackedEntityInstance:g,status:"ACTIVE"},e,{}),v=await(0,o.post)("events",b);return{entityId:p.response.importSummaries[0].reference,eventId:v.response.importSummaries[0].reference}};t.addPersonWithEvent=g;const b=async(e,t,a,r)=>{let{programStageId:n,orgUnitId:i,entityId:l,entityValues:s,sampleDate:u}=a;const d=await(0,c.setEventValues)({dataValues:[],eventDate:u,orgUnit:i,program:t,programStage:n,trackedEntityInstance:l,status:"ACTIVE"},e,r);s&&await m(l,s);let p=[];p=(await(0,o.get)((0,o.request)("trackedEntityInstances/"+l,{fields:"enrollments[program]"}))).enrollments,p.find(e=>e.program===t)||await(0,o.post)("enrollments",{trackedEntityInstance:l,orgUnit:i,program:t,enrollmentDate:u,incidentDate:u});return{entityId:l,eventId:await(0,o.postEvent)(d)}};t.addEvent=b;t.setEventStatus=async(e,t)=>{const a="events/"+e;let r=await(0,o.get)(a);r.status=t?"COMPLETED":"ACTIVE";const n={};r.dataValues.forEach(e=>n[e.dataElement]=e.value),"Resend"===n[s.L1_APPROVAL_STATUS]&&(n[s.L1_APPROVAL_STATUS]="",n[s.L1_REVISION_REASON]=""),"Resend"===n[s.L2_APPROVAL_STATUS]&&(n[s.L2_APPROVAL_STATUS]="",n[s.L2_REVISION_REASON]=""),r=await(0,c.setEventValues)(r,n,{}),await(0,o.put)(a,r)};t.updateEventValue=async(e,t,a,r,n,o,i,l)=>{var s={event:e,program:r,programStage:l,orgUnit:n,status:i,trackedEntityInstance:o.id,dataValues:[{dataElement:t,value:a,providedElsewhere:!1}]};let c=E("PUT",`../../../api/events/${e}/${t}`,{json:s});JSON.parse(c.getBody("utf8"))};t.isDuplicateRecord=async e=>{let{event:t,entity:a,organism:r,sampleId:n}=e,i=(await(0,o.get)((0,o.request)("events",{order:"created:asc",fields:"event,dataValues[dataElement,value]",filters:`${s.SAMPLE_ID_ELEMENT}:eq:${n}`,options:["program=L7bu48EI54J"]}))).events;return!!i&&(!(i.length<1)&&(i[0].event!==t&&(i=i.filter(e=>e.event!==t),!(i.length<1)&&void 0)))}},484:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.request=void 0;t.request=(e,t)=>{let{fields:a,filters:r,order:n,options:o,paging:i=!1}=t,l=`${e}?paging=${i}`;return a&&(l+="&fields="+a),r&&(l+="&filter="+r),n&&(l+="&order="+n),o&&(l+="&"+o.join("&")),l}},485:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEvent=void 0;var r=a(97);t.getEvent=async e=>await(0,r.get)("events/"+e)},486:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postEvent=void 0;var r=a(97);t.postEvent=async e=>(await(0,r.post)("events",e)).response.importSummaries[0].reference},487:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.putEvent=void 0;var r=a(97);t.putEvent=async e=>await(0,r.put)("events/"+e.event,e)},488:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteEvent=void 0;var r=a(97);t.deleteEvent=async e=>await(0,r.del)("events/"+e)},489:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteTEI=void 0;var r=a(97);t.deleteTEI=async e=>await(0,r.del)("trackedEntityInstances/"+e)},490:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postDataElement=void 0;var r=a(97);t.postDataElement=async e=>await(0,r.post)("dataElements",e)},491:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateAmrId=void 0;var r=a(36),n=a(492);t.generateAmrId=async(e,t)=>{const a=()=>`${t}${Math.floor(9e4*Math.random())+1e4}`,o=await(async e=>(await(0,r.get)((0,r.request)(`sqlViews/${n.GET_AMR_IDS}/data`,{options:["var=orgunit:"+e]}))).listGrid.rows.map(e=>e[0]))(e);let i=a();for(;o.includes(i);)i=a();return i}},492:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GET_AMR_IDS=void 0;t.GET_AMR_IDS="joGfuhbHQUx"},493:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProgramStage=void 0;var r=a(86);t.getProgramStage=async(e,t,a)=>{let{completed:n,isIsolate:o}=a;const i=e=>e.forEach(e=>l.dataElements[e].editable=!0),l=JSON.parse(JSON.stringify(e));l.programStageSections.forEach(e=>{e.editable&&i(e.dataElements),e.childSections.forEach(e=>{e.editable&&i(e.dataElements)})}),Object.keys(l.dataElements).forEach(e=>{const a=l.dataElements[e];a.disabled=(e=>{switch(e){case r.AMR_ELEMENT:return t[r.AMR_ELEMENT]&&""!==t[r.AMR_ELEMENT];case r.ORGANISM_ELEMENT:return t[r.ORGANISM_ELEMENT]&&""!==t[r.ORGANISM_ELEMENT];default:return o&&!l.dataElements[e].editable}})(e),a.optionSet&&(a.optionSet=a.optionSet.id),t[e]||(t[e]="")});return{programStage:l,status:{deletable:!n,editable:!0,finished:!1,completed:n},eventValues:t}}},494:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEventValues=void 0;t.setEventValues=async(e,t,a)=>{e.dataValues||(e.dataValues=[]);for(const r in t){const a=e.dataValues.find(e=>e.dataElement===r);a?a.value=t[r]:e.dataValues.push({dataElement:r,value:t[r]})}return 0!=a.length&&e.dataValues.push.apply(e.dataValues,a.dataValues),e}},495:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEventValues=void 0;var r=a(36);t.getEventValues=async e=>{const t=await(0,r.getEvent)(e);if(404===t.httpStatusCode)throw 404;const a={};return t.dataValues&&t.dataValues.forEach(e=>a[e.dataElement]=e.value),{programId:t.program,programStageId:t.programStage,eventValues:a,completed:"COMPLETED"===t.status,entityId:t.trackedEntityInstance,sampleDate:t.eventDate}}},526:function(e,t){},529:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.initMetadata=void 0;var n=r(a(11)),o=a(36),i=a(86),l=a(213);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const u=e=>{e.children.forEach(e=>u(e)),e.children.sort((e,t)=>e.displayName>t.displayName?1:t.displayName>e.displayName?-1:0)},d=(e,t)=>e.replace(t,"");t.initMetadata=async e=>{let t=[];const a=await(async()=>await(0,o.get)((0,o.request)("me",{fields:"organisationUnits,userGroups,userCredentials[username]"})))(),r=a.userGroups.map(e=>e.id),n={username:a.userCredentials.username,deoMember:r.includes(i.DEO_GROUP)},s=a.organisationUnits.map(e=>e.id),p=await(async()=>await(0,o.get)((0,o.request)("metadata",{order:"level:asc",fields:["children","condition","code","dataElement","displayName","formName","attributeValues[value,attribute[code]]","categoryOptionCombos[id,categoryOptions[code,id]]","id","name","options","organisationUnits","path","priority","program","programRuleActions[programRuleActionType,dataElement,\n                optionGroup,content,trackedEntityAttribute,\n                programStageSection,data]","programStage","programStages[id,displayName,access,programStageDataElements[\n                dataElement[id],compulsory],programStageSections[id,name,\n                displayName,renderType,dataElements[id,displayFormName,\n                code,valueType,optionSetValue,optionSet]]]","trackedEntityTypeAttributes[name,id,displayName,valueType,\n                unique,optionSetValue,optionSet,mandatory,\n                trackedEntityAttribute[name,id,displayName,valueType,\n                unique,optionSetValue,optionSet]]","value","programRuleVariableSourceType"],options:["constants=true","dataElements=true","optionGroups=true","options=true","optionSets=true","organisationUnits=true","programRules=true","programRuleVariables=true","programs=true","trackedEntityTypes=true","categoryCombos=true","dataSets=true"]})))(),E=[];p.organisationUnits.filter(e=>s.some(t=>e.path.includes(t))).forEach(e=>{if(s.includes(e.id))E.push(e);else{const t=e.path.split("/").slice(1,-1);let a=t.shift(),r=E.find(e=>e.path.endsWith(a));for(;!r;)a=t.shift(),r=E.find(e=>e.path.endsWith(a));for(;t.length>0;)a=t.shift(),r=r.children.find(e=>a===e.id);if(r){const t=r.children;t[t.findIndex(t=>t.id===e.id)]=e}}}),E.forEach(e=>u(e));const f={};p.options.forEach(e=>f[e.id]={label:e.displayName,value:e.code});const m={};p.optionSets.forEach(e=>m[e.id]=e.options.map(e=>f[e.id])),p.optionGroups.forEach(e=>m[e.id]=e.options.map(e=>f[e.id]));const g=p.trackedEntityTypes.find(e=>e.id=i.PERSON_TYPE);g.uniques={},g.values={};const b={};g.trackedEntityTypeAttributes.forEach(e=>{e.trackedEntityAttribute.unique&&(g.uniques[e.trackedEntityAttribute.id]=!0),g.values[e.trackedEntityAttribute.id]="",e.hide=!1,b[e.trackedEntityAttribute.name]=e.trackedEntityAttribute.id}),g.rules=[],p.programRules.filter(e=>e.programRuleActions.find(e=>e.trackedEntityAttribute)).forEach(e=>{g.rules.find(t=>t.name===e.name)||(e.condition=(e=>{const t=e.match(/A\{.*?\}/g),a=[];return t?(t.forEach(e=>{-1===a.indexOf(e)&&a.push(e)}),a.forEach(t=>{const a=b[t.substring(2,t.length-1)];e=e.replace(/A\{.*?\}/g,"values['"+a+"']")}),e):e})(e.condition),g.rules.push(e))});const v=p.programs.filter(e=>!e.name.includes(l.IGNORE)),y=[],O={},h={};v.forEach(t=>{y.push({value:t.id,label:t.name,orgUnits:t.organisationUnits.map(e=>e.id)});const a=[];h[t.id]=p.optionGroups.find(e=>e.name===t.name).id;const r=[];t.programStages.filter(e=>e.access.data.write).forEach(t=>{"Follow-up Notes"!=t.displayName&&a.push({value:t.id,label:t.displayName}),t.dataElements={},t.programStageDataElements.forEach(e=>t.dataElements[e.dataElement.id]={required:e.compulsory,hide:!1}),t.dataElements[i.ORGANISM_ELEMENT]&&(t.dataElements[i.ORGANISM_ELEMENT].hideWithValues=!0),t.programStageSections.forEach(a=>{a.name.includes(l.HIDE)&&(a.displayName=a.name=d(a.name,l.HIDE),a.hideWithValues=!0),(e=>e.includes(l.EDITABLE))(a.name)&&(a.displayName=a.name=d(a.name,l.EDITABLE),e&&(a.editable=!0)),a.dataElements.forEach(e=>t.dataElements[e.id]=c(c({},t.dataElements[e.id]),e)),a.dataElements=a.dataElements.map(e=>e.id);const n=[];t.programStageSections.filter(e=>e.name.match(new RegExp("{"+a.name+"}.*"))).forEach(e=>{r.push(e.id),e.name=e.name.replace(new RegExp("{"+a.name+"}"),""),e.editable=!!a.editable,n.push(e)}),a.childSections=n}),t.programStageSections=t.programStageSections.filter(e=>!r.includes(e.id))}),O[t.id]=a});let S=[];p.programRules.filter(e=>e.programRuleActions.find(e=>e.dataElement||e.programStageSection||e.content)).forEach(e=>{e.condition=((e,a)=>{const r=e;try{const r=e.match(/#\{.*?\}/g),n=[];if(!r)return e;r.forEach(e=>{-1===n.indexOf(e)&&n.push(e)}),n.forEach(r=>{const n=r.substring(2,r.length-1),o=p.programRuleVariables.find(e=>e.name===n&&e.program.id==a);var i=o.dataElement?o.dataElement.id:"";if("CALCULATED_VALUE"===o.programRuleVariableSourceType){t.some(e=>e.id==n&&e.program==o.program.id)||t.push({id:n,program:o.program.id}),i=n}i&&(e=e.replace(new RegExp("#{"+n+"}","g"),"values['"+i+"']"))})}catch(n){console.warn("Improper condition:",r)}return e})(e.condition,e.program.id),S.push(e)}),S=S.sort((e,t)=>e.priority>t.priority||!e.priority?1:-1);const _={};p.constants&&p.constants.forEach(e=>{e.code&&(_[e.code]=e.value)});const T={},P={attributeGroups:{}};p.dataElements.forEach(e=>{T[e.id]=e.formName?e.formName:e.displayName,e.attributeValues.forEach(t=>{e[t.attribute.code]=t.value,P.attributeGroups[t.value]||(P.attributeGroups[t.value]=[]),P.attributeGroups[t.value].push(e.id)}),P[e.id]=e,P[e.code]=e});const j={};p.categoryCombos.forEach(e=>{e.categoryOptions={},e.categoryOptionCombos.forEach(t=>{let a=[];t.categoryOptions.forEach(t=>{a.push(t.code),e.categoryOptions[t.code]||(e.categoryOptions[t.code]=t.id)}),a=a.sort();let r=a.join("");e.categoryOptionCombos[r]=t.id}),j[e.code]=e});const A={};return p.dataSets.forEach(e=>{A[e.code]=e.id}),{optionSets:m,person:g,programs:v,programList:y,stageLists:O,programOrganisms:h,constants:_,dataElements:T,dataElementObjects:P,categoryCombos:j,dataSets:A,orgUnits:E,user:n,eventRules:S,calculatedVariables:t}}},530:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RESEND=t.REJECTED=t.APPROVED=void 0;t.APPROVED="Approved";t.RESEND="Resend";t.REJECTED="Rejected"},531:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMPLETED=t.ACTIVE=void 0;t.COMPLETED="COMPLETED";t.ACTIVE="ACTIVE"},532:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IGNORE=t.HIDE=t.EDITABLE=void 0;t.HIDE="[HIDE]";t.EDITABLE="[EDITABLE]";t.IGNORE="[IGNORE]"},533:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.entityRules=void 0;const entityRules=(values,attr,_ref)=>{let{rules:rules,optionSets:optionSets,uniques:uniques}=_ref;return rules.forEach(rule=>{rule.programRuleActions.forEach(r=>{try{switch(r.programRuleActionType){case"SHOWOPTIONGROUP":if(eval(rule.condition)){const e=findAttribute(r.trackedEntityAttribute.id,attr);e.trackedEntityAttribute.optionSet.id!==r.optionGroup.id&&(e.trackedEntityAttribute.optionSet={id:r.optionGroup.id},optionSets[e.trackedEntityAttribute.optionSet.id].find(t=>t.value===values[e.trackedEntityAttribute.id])||(values[e.trackedEntityAttribute.id]=""))}break;case"HIDEFIELD":const hide=eval(rule.condition),affectedAttr=findAttribute(r.trackedEntityAttribute.id,attr);hide!==affectedAttr.hide&&(affectedAttr.hide=hide,hide&&(values[affectedAttr.trackedEntityAttribute.id]=""))}}catch(error){console.warn("Failed to evaluate rule:",rule,error)}})}),[values,attr,validate(values,attr,uniques)]};exports.entityRules=entityRules;const findAttribute=(e,t)=>t.find(t=>t.trackedEntityAttribute.id==e),validate=(e,t,a)=>{if(t.find(t=>t.mandatory&&""===e[t.trackedEntityAttribute.id]))return!1;for(const r in a)if(!a[r])return!1;return!0}},534:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eventRules=void 0;var _dhis=__webpack_require__(86),INVALID_REASONS=_interopRequireWildcard(__webpack_require__(214));function _getRequireWildcardCache(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(_getRequireWildcardCache=function(e){return e?a:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=_getRequireWildcardCache(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}const eventRules=(values,stage,_ref)=>{let{rules:rules,optionSets:optionSets,pushChanges:pushChanges,updateValue:updateValue}=_ref;const findSection=e=>{for(const t of stage.programStageSections){if(t.id===e)return t;if(t.childSections){const a=t.childSections.find(t=>t.id===e);if(a)return a}}return null},getVariables=e=>{const t=e.match(/values\[\'.*?\'\]/g),a=[];if(t)return t.forEach(e=>{-1===a.indexOf(e)&&a.push(e)}),a.map(e=>e.substring(8,e.length-2))},getColor=e=>{switch(e){case"Resistant":return"red";case"Intermediate":return"yellow";case"Susceptible":return"green";default:return""}},setColors=(e,t,a)=>{if(!t.optionSetValue)return;if(t.optionSet!==_dhis.TEST_RESULT_ELEMENT)return;const r=getVariables(e);r.forEach(e=>{const t=stage.dataElements[e];values[e]&&/\d/.test(t.displayFormName)&&r.find(e=>e!==t.id&&values[e]&&""!==values[e])?(t.color="",t.warning="MIC is prioritized over DD"):(t.color=""!==values[e]&&a?getColor(a):"",(t.warning="MIC is prioritized over DD")&&(t.warning=""))})};rules.forEach(rule=>{rule.programRuleActions.forEach(r=>{try{const cond=eval(rule.condition),de=r.dataElement?stage.dataElements[r.dataElement.id]:r.content?{id:r.content.slice(2,-1),hasCalculatedVar:!0}:null,s=r.programStageSection?findSection(r.programStageSection.id):null;switch(r.programRuleActionType){case"SHOWOPTIONGROUP":if(!cond||de.optionSet===r.optionGroup.id)break;de.optionSet=r.optionGroup.id,optionSets[de.optionSet].find(e=>e.value===values[de.id])||""===values[de.id]||(values[de.id]="",pushChanges&&updateValue(de.id,""));break;case"HIDEFIELD":if(cond===de.hide)break;setColors(rule.condition,de),de.hide=cond,""!==values[de.id]&&(values[de.id]="",pushChanges&&updateValue(de.id,""));break;case"HIDESECTION":cond!==s.hide&&(s.hide=cond);break;case"ASSIGN":const e=Object.keys(r).filter(e=>"content"==e||"dataElement"==e);e.forEach(e=>{let t="dataElement"==e?stage.dataElements[r.dataElement.id]:r.content?{id:r.content.slice(2,-1),hasCalculatedVar:!0}:null;cond&&(setColors(rule.condition,t,r.data),values[t.id]!==r.data&&(values[t.id]=r.data,t.hasCalculatedVar||pushChanges&&updateValue(t.id,r.data)),t.hasCalculatedVar||(t.disabled=!0))});break;case"SHOWWARNING":cond&&de.warning!==r.content?de.warning=r.content:cond||de.warning!==r.content||(de.warning=null);break;case"SHOWERROR":cond&&de.error!==r.content?de.error=r.content:cond||de.error!==r.content||(de.error=null)}}catch(error){console.warn("Failed to evaluate rule:",rule,error)}})});const invalid=validateValues(stage.dataElements,values,stage.programStageSections);return[values,stage,invalid]};exports.eventRules=eventRules;const validateValues=(e,t,a)=>{const r=t=>t.find(t=>e[t].error);for(const n of a){if(n.childSections){const a=validateValues(e,t,n.childSections);if(a)return a}if(n.dataElements.find(a=>e[a].required&&""===t[a]))return INVALID_REASONS.REQUIRED_EMPTY;if(r(n.dataElements))return INVALID_REASONS.INVALID_FIELD}return!1}},535:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=void 0;t.getRules=(e,t,a)=>e.filter(e=>!!e.programStage&&e.programStage.id===a||e.program.id===t&&(!e.programStage||e.programStage.id===a))},536:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.setProgram=t.setPanelValue=t.setPanel=t.resetPanel=t.panelEditable=void 0;var n=r(a(11)),o=a(96),i=a(66);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.panelEditable=()=>e=>e((0,o.createAction)(i.PANEL_EDITABLE));t.setPanel=()=>async(e,t)=>{e((0,o.createAction)(RESET_PANEL_EVENT))};t.setProgram=e=>(t,a)=>{const{programOrganisms:r,optionSets:n,stageLists:l}=a().metadata,s=a().data.panel.sampleDate,c=a().data.previousValues;var u=[];n[r[e]].forEach(e=>{u.find(t=>t.value===e.value)||(u.push(e),u.sort(function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(a,r){return-1==t?r[e].localeCompare(a[e]):a[e].localeCompare(r[e])}}("label")))});const d=l[e].length>1?"":l[e][0].value;let p=!1;c&&s&&Object.keys(c).length>0&&(p=!0),t((0,o.createAction)(i.SET_PANEL,{program:e,programStage:d,organism:"",sampleDate:p?s:"",organisms:u,valid:!1}))};t.setPanelValue=(e,t)=>(a,r)=>{const{program:n,programStage:l,organism:c,organisms:u,sampleDate:d}=r().data.panel,p={program:n,programStage:l,sampleDate:d};if(p[e]===t)return;const E=!Object.values(s(s({},p),{},{[e]:t})).includes("");a((0,o.createAction)(i.SET_PANEL_VALUE,{key:e,value:t,valid:E}))};t.resetPanel=()=>e=>e((0,o.createAction)(i.RESET_PANEL))},537:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.submitEvent=t.setEventValue=t.setDeletePrompt=t.setDataELments=t.setButtonLoading=t.saveEvent=t.resetData=t.onDeleteConfirmed=t.nextEvent=t.initNewEvent=t.inCompleteEvent=t.getExistingEvent=t.getEventObject=t.enableButtons=t.editEvent=t.disableButtons=t.createNewEvent=t.checkDuplicacy=t.addSelectedProgramOfOrgUnits=t.addExistingEvent=t.AddAndSubmit=void 0;var n=r(a(11)),o=a(9),i=a(96),l=a(66),s=a(36),c=a(156),u=a(215),d=a(157),p=a(130),E=a(86),f=a(129);function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.resetData=()=>e=>e((0,i.createAction)(l.RESET_DATA));const b=()=>e=>e((0,i.createAction)(l.DISABLE_BUTTONS));t.disableButtons=b;const v=()=>e=>e((0,i.createAction)(l.ENABLE_BUTTONS));t.enableButtons=v;const y=e=>t=>t((0,i.createAction)(l.REMOVE_BUTTONS,e));t.AddAndSubmit=y;t.setButtonLoading=e=>t=>t((0,i.createAction)(SET_BUTTONS,e));t.addExistingEvent=e=>t=>t((0,i.createAction)(l.SET_EVENT,e));t.addSelectedProgramOfOrgUnits=e=>t=>t((0,i.createAction)(l.SET_INITIAL_PROGRAM,e));t.setDataELments=e=>t=>t((0,i.createAction)(l.LOAD_DATAELEMENTS,e));t.initNewEvent=e=>(t,a)=>{const r=a().metadata.person,n=a().metadata.optionSets,o=a().metadata.orgUnits,s=a().metadata.programList.filter(t=>t.orgUnits.includes(e)),[c,d]=(0,u.entityRules)(r.values,r.trackedEntityTypeAttributes,{rules:r.rules,optionSets:n,uniques:{}});e={id:e,code:O(e,o)},t((0,i.createAction)(l.SET_ENTITY_AND_ORG_UNIT,{values:c,id:null,valid:!1,attributes:d,orgUnit:e,programs:s}))};const O=(e,t)=>{for(const a of t){if(a.id===e)return a.code;if(a.children){const t=O(e,a.children);if(t)return t}}};t.getExistingEvent=(e,t,a,r,n)=>async(o,s)=>{const d=s(),p=d.metadata.programs,m=d.metadata.optionSets,{trackedEntityTypeAttributes:b,rules:v}=d.metadata.person;try{const s=await(0,c.existingRecord)(p,e,t,a),[f,y]=(0,u.entityRules)(g(g({},d.metadata.person.values),s.entityValues),b,{rules:v,optionSets:m,uniques:[]});if(s.TeiID=t,s.btnStatus=n,s.editable=r,0==s.eventList.length)s.entityValues=f,s.entityAttributes=y,s.orgUnit={id:e,code:O(e,d.metadata.orgUnits)},s.programs=d.metadata.programList,s.organisms=m[E.ORGANISM_SET],o((0,i.createAction)(l.EXISTING_TEI_DATA_RECEIVED,s));else{s.eventRules=(0,u.getRules)(d.metadata.eventRules,s.program,s.programStage.id),d.metadata.calculatedVariables.forEach(e=>{for(let t in s.eventValues)t!=e.id&&s.program==e.program&&(s.eventValues[e.id]="")});const a="ACTIVE",[r,n,p]=(0,u.eventRules)(s.eventValues,s.programStage,{rules:s.eventRules,optionSets:m,pushChanges:!s.status.completed,updateValue:(r,n)=>(0,c.updateEventValue)(s.eventId,r,n,s.program,e,t,a,s.programStage.id)});s.entityValues=f,s.entityAttributes=y,s.eventValues=r,s.programStage=n,s.orgUnit={id:e,code:O(e,d.metadata.orgUnits)},s.programs=d.metadata.programList,s.organisms=m[E.ORGANISM_SET],s.invalid=p,s.rules=(0,u.getRules)(d.metadata.eventRules,s.program,s.programStage.id),o((0,i.createAction)(l.EXISTING_DATA_RECEIVED,s))}}catch(y){console.error(y),o((0,f.showAlert)("Failed to get record.",{critical:!0})),o((0,i.createAction)(l.EXISTING_DATA_ERRORED))}};t.getEventObject=async(e,t,a,r,n,o)=>{const i=e.programs,l=e.optionSets,{trackedEntityTypeAttributes:s,rules:d}=e.person;try{const p=await(0,c.existingRecord)(i,t,a,r),[f,m]=(0,u.entityRules)(g(g({},e.person.values),p.entityValues),s,{rules:d,optionSets:l,uniques:[]});p.TeiID=a,p.btnStatus=o,p.editable=n,p.eventRules=(0,u.getRules)(e.eventRules,p.program,p.programStage.id),e.calculatedVariables.forEach(e=>{for(let t in p.eventValues)t!=e.id&&p.program==e.program&&(p.eventValues[e.id]="")});const b="ACTIVE",[v,y,h]=(0,u.eventRules)(p.eventValues,p.programStage,{rules:p.eventRules,optionSets:l,pushChanges:!p.status.completed,updateValue:(e,r)=>(0,c.updateEventValue)(p.eventId,e,r,p.program,t,a,b,p.programStage.id)});return p.entityValues=f,p.entityAttributes=m,p.values=v,p.programStage=y,p.orgUnit={id:t,code:O(t,e.orgUnits)},p.programs=e.programList,p.organisms=l[E.ORGANISM_SET],p.invalid=h,p.rules=(0,u.getRules)(e.eventRules,p.program,p.programStage.id),p}catch(p){return console.error(p),null}};t.createNewEvent=()=>async(e,t)=>{e(b);const a=t().data.orgUnit,r=t().data.entity,n=t().data.panel,o=t().metadata,s=t().data.previousValues;var d=[],p={};0!=Object.keys(s).length&&(Object.keys(s).forEach((function(e){""!=s[e]&&"Pathogens"!=s[e]&&d.push({dataElement:e,value:s[e]})})),p={dataValues:d,program:n.program,orgUnit:t().data.orgUnit.id},console.log("EVENTS POST SUCCESS",p));const E=(0,u.getRules)(o.eventRules,n.program,n.programStage);try{const t=await(0,c.newRecord)(n.program,o.programs.find(e=>e.id===n.program).programStages.find(e=>e.id===n.programStage),{orgaCode:n.organism,ou:a.id,eId:r.id,eValues:!r.id||r.editing?r.values:null,sampleDate:n.sampleDate,orgUnitCode:a.code},p);o.calculatedVariables.forEach(e=>{for(let a in t.eventValues)a!=e.id&&n.program==e.program&&(t.eventValues[e.id]="")});const s="ACTIVE",[d,f,m]=(0,u.eventRules)(t.eventValues,t.programStage,{rules:E,optionSets:o.optionSets,pushChanges:!t.status.completed,updateValue:(e,o)=>(0,c.updateEventValue)(t.eventId,e,o,a,r.id,s,n.programStage.id)});e((0,i.createAction)(l.SET_EVENT_AND_ENTITY,{values:d,eventId:t.eventId,programStage:f,status:t.status,rules:E,entityId:r.id?r.id:t.entityId,invalid:m}))}catch(m){console.error(m),e((0,f.showAlert)("Failed to create record.",{critical:!0})),e((0,i.createAction)(l.NEW_EVENT_ERRORED))}};t.submitEvent=e=>async(t,a)=>{(0,o.batch)(()=>{t(b()),t((0,i.createAction)(l.SET_BUTTON_LOADING,e?"submitAdd":"submit"))});const r=a().data.event.id,n=a().data.event.values;try{await(0,c.setEventStatus)(r,!0),e?t((0,i.createAction)(l.RESET_PANEL_EVENT)):"Pathogens"==n[E.ORGANISM_DETECTED]?(t((0,i.createAction)(l.SET_PREVIOUS_EVENT,{eventValues:n})),t(y(!1)),t((0,i.createAction)(l.PANEL_EDITABLE)),t((0,i.createAction)(l.RESET_PANEL_EVENT)),t((0,i.createAction)(l.PAGE_FIRST,!0))):t((0,i.createAction)(l.EXIT)),t((0,i.createAction)(l.SET_COMPLETED)),"Pathogens"!=n[E.ORGANISM_DETECTED]&&t((0,i.createAction)(l.COMPLETED_CLICKED,!0)),t((0,i.createAction)(l.COMPLETED_CLICKED,!0)),t((0,f.showAlert)("Submitted successfully.",{success:!0}))}catch(s){console.error(s),t((0,f.showAlert)("Failed to submit.",{critical:!0})),t((0,i.createAction)(l.ENABLE_BUTTONS))}finally{(0,o.batch)(()=>{t(v()),t((0,i.createAction)(l.SET_BUTTON_LOADING,!1))})}};t.editEvent=()=>async(e,t)=>{(0,o.batch)(()=>{e(b()),e((0,i.createAction)(l.SET_BUTTON_LOADING,"edit"))});const a=t().data.event.id;try{await(0,c.setEventStatus)(a),e((0,i.createAction)(l.SET_INCOMPLETED)),e((0,f.showAlert)("Record is editable."))}catch(r){console.error(r),e((0,f.showAlert)("Failed to edit record.",{critical:!0}))}finally{(0,o.batch)(()=>{e((0,i.createAction)(l.SET_BUTTON_LOADING,!1)),e(v())})}};const h=e=>t=>t((0,i.createAction)(l.SET_DELETE_PROMPT,e));t.setDeletePrompt=h;t.onDeleteConfirmed=(e,t)=>async(a,r)=>{if(!e)return void a(h(!1));a(h(p.LOADING));const n=r().data.event.id;try{t&&await t();const e=(await(0,s.deleteEvent)(n)).response;if(1!==e.importCount.deleted)throw e.description;a((0,f.showAlert)("Deleted successfully.",{})),a(h(p.SUCCESS))}catch(o){console.error(o),a((0,f.showAlert)("Failed to delete.",{critical:!0})),a(h(!0))}};t.setEventValue=(e,t,a)=>(r,n)=>{const o=n().data.event;if(o.values[e]===t)return;const s=n().metadata.optionSets,d=n().data.panel.program,p=n().data.orgUnit.id,f=n().data.entity,m=n().data.panel.programStage;1!=a?(0,c.updateEventValue)(o.id,e,t,d,p,f,"ACTIVE",m):1==a&&(["mp5MeJ2dFQz","dRKIjwIDab4","GpAu5HjWAEz","B7XuDaXPv10"].includes(e)||(0,c.updateEventValue)(o.id,e,t,d,p,f,"ACTIVE",m)),e===E.SAMPLE_ID_ELEMENT&&d==E.SAMPLE_TESTING_PROGRAM[0].value&&r(S(t));const[b,v,y]=(0,u.eventRules)(g(g({},o.values),{},{[e]:t}),o.programStage,{rules:o.rules,optionSets:s,pushChanges:!o.status.completed,updateValue:(e,t)=>(0,c.updateEventValue)(o.id,e,t,d,p,f,"ACTIVE",m)});r((0,i.createAction)(l.SET_EVENT_VALUES_AND_PROGRAMSTAGE,{programStage:v,values:b,invalid:y}))};const S=e=>async(t,a)=>{t((0,i.createAction)(l.DUPLICACY,d.DUPLICATE_CHECKING));const r=a().data.event.id,n=a().data.entity.id,o=a().data.panel.organism,s=await(0,c.isDuplicateRecord)({event:r,entity:n,organism:o,sampleId:e});t((0,i.createAction)(l.DUPLICACY,s))};t.checkDuplicacy=S;t.inCompleteEvent=()=>async(e,t)=>{(0,o.batch)(()=>{e(b()),e((0,i.createAction)(l.SET_BUTTON_LOADING,"incomplete"))});const a=t().data.event.id;try{await(0,c.setEventStatus)(a,!1),e((0,i.createAction)(l.SET_INCOMPLETED)),e((0,f.showAlert)("Record is editable.")),e((0,i.createAction)(l.COMPLETED_CLICKED,!1))}catch(r){console.error(r),e((0,f.showAlert)("Failed to edit record.",{critical:!0}))}finally{(0,o.batch)(()=>{e((0,i.createAction)(l.SET_BUTTON_LOADING,!1)),e(v())})}};t.nextEvent=(e,t,a)=>async(e,r)=>{const n=r().data.event.id,s=r().data.event.values;var u=0==r().data.event.invalid;try{await(0,c.setEventStatus)(n,u),t&&e((0,i.createAction)(l.RESET_SAMPLE_PANEL_EVENT)),a?e((0,i.createAction)(l.RESET_PANEL_EVENT)):"Pathogens"==s[E.ORGANISM_DETECTED]?(e((0,i.createAction)(l.SET_PREVIOUS_EVENT,{eventValues:s})),e(y(!1)),e((0,i.createAction)(l.PANEL_EDITABLE)),e((0,i.createAction)(l.RESET_PANEL_EVENT)),e((0,i.createAction)(l.PAGE_FIRST,!0))):e((0,i.createAction)(l.EXIT)),u||e((0,i.createAction)(l.SET_COMPLETED))}catch(d){console.error(d),e((0,f.showAlert)("Failed to submit.",{critical:!0})),e((0,i.createAction)(l.ENABLE_BUTTONS))}finally{(0,o.batch)(()=>{e(v()),e((0,i.createAction)(l.SET_BUTTON_LOADING,!1))})}};t.saveEvent=(e,t)=>async(a,r)=>{(0,o.batch)(()=>{a(b()),a((0,i.createAction)(l.SET_BUTTON_LOADING,"submit"))});const n=r().data.event.id,s=r().data.event.values;r().data.event.invalid;try{t&&await(0,c.setEventStatus)(n,!t),e&&await(0,c.setEventStatus)(n,e),"Pathogens"==s[E.ORGANISM_DETECTED]?(a((0,i.createAction)(l.SET_PREVIOUS_EVENT,{eventValues:s})),a(y(!1)),a((0,i.createAction)(l.PANEL_EDITABLE)),a((0,i.createAction)(l.RESET_PANEL_EVENT)),a((0,i.createAction)(l.PAGE_FIRST,!0))):a((0,i.createAction)(l.EXIT)),e&&a((0,i.createAction)(l.SET_COMPLETED)),a((0,f.showAlert)("Event Saved",{success:!0}))}catch(u){console.error(u),a((0,f.showAlert)("Failed to submit.",{critical:!0})),a((0,i.createAction)(l.ENABLE_BUTTONS))}finally{(0,o.batch)(()=>{a(v()),a((0,i.createAction)(l.SET_BUTTON_LOADING,!1))})}}},540:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMetadata=void 0;var r=a(156),n=a(96),o=a(66),i=a(129);const l=[{label:"Reload",onClick:()=>window.location.reload()}];t.setMetadata=e=>async t=>{try{const a=await(0,r.initMetadata)(e);t((0,n.createAction)(o.METADATA_RECEIVED,a))}catch(a){console.error(a),t((0,n.createAction)(o.METADATA_ERRORED)),t((0,i.showAlert)("Failed to initiate app.",{critical:!0,actions:l}))}}},541:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setOrgUnit=void 0;var r=a(96),n=a(66);t.setOrgUnit=e=>t=>t((0,r.createAction)(n.ORG_UNIT_SELECTED,e))},542:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"App",{enumerable:!0,get:function(){return r.App}});var r=a(543)},543:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var n,o,i,l=r(a(0)),s=a(131),c=a(9),u=a(1),d=a(29),p=a(970),E=a(279),f=a(278),m=r(a(768)),g=a(32),b=a(769),v=a(770),y=a(772);const O=e=>{let{appName:t,store:a,children:r}=e;return l.default.createElement(s.BrowserRouter,null,l.default.createElement(s.HashRouter,null,l.default.createElement(d.MuiThemeProvider,{theme:b.muiTheme},l.default.createElement(f.MuiPickersUtilsProvider,{utils:m.default},l.default.createElement(l.default.Fragment,null,n||(n=l.default.createElement(g.CssReset,null)),o||(o=l.default.createElement(v.BodyStyle,null)),l.default.createElement(E.DataProvider,{baseUrl:"../../..",apiVersion:"34"},l.default.createElement(p.HeaderBar,{appName:t}),l.default.createElement(c.Provider,{store:a},r,i||(i=l.default.createElement(y.Alerts,null)))))))))};t.App=O,O.propTypes={appName:u.string.isRequired,store:u.object.isRequired,children:u.node.isRequired}},66:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SET_UNIQUE=t.SET_PREVIOUS_EVENT=t.SET_PREVIOUS_ENTITY=t.SET_PANEL_VALUE=t.SET_PANEL=t.SET_MODAL_LOADING=t.SET_INITIAL_PROGRAM=t.SET_INCOMPLETED=t.SET_EVENT_VALUES_AND_PROGRAMSTAGE=t.SET_EVENT_VALUE=t.SET_EVENT_AND_ENTITY=t.SET_EVENT=t.SET_ENTITY_VALUE=t.SET_ENTITY_MODAL_AND_UNIQUES=t.SET_ENTITY_AND_ORG_UNIT=t.SET_ENTITY=t.SET_EDITING=t.SET_DELETE_PROMPT=t.SET_COMPLETED=t.SET_BUTTON_LOADING=t.RESET_SAMPLE_PANEL_EVENT=t.RESET_PREVIOUS_ENTITY=t.RESET_PANEL_EVENT=t.RESET_PANEL=t.RESET_DATA=t.REMOVE_BUTTONS=t.REMOVE_ALERT=t.PANEL_EDITABLE=t.PAGE_FIRST=t.ORG_UNIT_SELECTED=t.NEW_EVENT_ERRORED=t.METADATA_RECEIVED=t.METADATA_ERRORED=t.LOAD_DATAELEMENTS=t.EXIT=t.EXISTING_TEI_DATA_RECEIVED=t.EXISTING_DATA_RECEIVED=t.EXISTING_DATA_ERRORED=t.ENABLE_BUTTONS=t.DUPLICACY=t.DISABLE_BUTTONS=t.COMPLETED_CLICKED=t.AGGREGATION_ON_PROGRESS=t.ADD_ENTITY=t.ADD_ALERT=void 0;t.METADATA_RECEIVED="METADATA_RECEIVED";t.METADATA_ERRORED="METADATA_ERRORED";t.ORG_UNIT_SELECTED="ORG_UNIT_SELECTED";t.ADD_ALERT="ADD_ALERT";t.REMOVE_ALERT="REMOVE_ALERT";t.RESET_DATA="RESET_DATA";t.EXISTING_DATA_RECEIVED="EXISTING_DATA_RECEIVED";t.EXISTING_DATA_ERRORED="EXISTING_DATA_ERRORED";t.DISABLE_BUTTONS="DISABLE_BUTTONS";t.ENABLE_BUTTONS="ENABLE_BUTTONS";t.RESET_PANEL_EVENT="RESET_PANEL_EVENT";t.SET_COMPLETED="SET_COMPLETED";t.SET_INCOMPLETED="SET_INCOMPLETED";t.SET_DELETE_PROMPT="SET_DELETE_PROMPT";t.EXIT="EXIT";t.SET_BUTTON_LOADING="SET_BUTTON_LOADING";t.SET_ENTITY="SET_ENTITY";t.SET_ENTITY_VALUE="SET_ENTITY_VALUE";t.SET_UNIQUE="SET_UNIQUE";t.SET_ENTITY_MODAL_AND_UNIQUES="SET_ENTITY_MODAL_AND_UNIQUES";t.SET_EDITING="SET_EDITING";t.SET_MODAL_LOADING="SET_MODAL_LOADING";t.SET_PANEL="SET_PANEL";t.SET_PANEL_VALUE="SET_PANEL_VALUE";t.RESET_PANEL="RESET_PANEL";t.SET_ENTITY_AND_ORG_UNIT="SET_ENTITY_AND_ORG_UNIT";t.SET_EVENT_VALUE="SET_EVENT_VALUE";t.SET_EVENT_AND_ENTITY="SET_EVENT_AND_ENTITY";t.SET_EVENT_VALUES_AND_PROGRAMSTAGE="SET_EVENT_VALUES_AND_PROGRAMSTAGE";t.DUPLICACY="DUPLICACY";t.NEW_EVENT_ERRORED="NEW_EVENT_ERRORED";t.SET_PREVIOUS_ENTITY="SET_PREVIOUS_ENTITY";t.RESET_PREVIOUS_ENTITY="RESET_PREVIOUS_ENTITY";t.ADD_ENTITY="ADD_ENTITY";t.PANEL_EDITABLE="PANEL_EDITABLE";t.EXISTING_TEI_DATA_RECEIVED="EXISTING_TEI_DATA_RECEIVED";t.REMOVE_BUTTONS="REMOVE_BUTTONS";t.SET_PREVIOUS_EVENT="SET_PREVIOUS_EVENT";t.SET_EVENT="SET_EVENT";t.PAGE_FIRST="PAGE_FIRST";t.AGGREGATION_ON_PROGRESS="AGGREGATION_ON_PROGRESS";t.COMPLETED_CLICKED="COMPLETED_CLICKED";t.RESET_SAMPLE_PANEL_EVENT="RESET_SAMPLE_PANEL_EVENT";t.SET_INITIAL_PROGRAM="SET_INITIAL_PROGRAM";t.LOAD_DATAELEMENTS="LOAD_DATAELEMENTS"},769:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.muiTheme=void 0;var r=a(29),n=a(32);const o=(0,r.createMuiTheme)({palette:{primary:{main:n.theme.secondary600}},typography:{useNextVariants:!0},overrides:{MUIDataTableToolbar:{titleRoot:{marginLeft:16},titleText:{fontSize:"1.25rem",color:"#0d0d0e",letterSpacing:"normal"}},MUIDataTableBodyRow:{root:{userSelect:"none",cursor:"pointer"}},MuiTableCell:{root:{padding:"4px 46px 4px 18px"}},MuiModal:{root:{zIndex:1e4}}}});t.muiTheme=o},770:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BodyStyle=void 0;var r=a(18);a(771);const n=r.createGlobalStyle`
    body {
        background-color: rgb(240, 240, 240);
        min-width: 400px;
        overflow-y: auto !important;
        padding-right: 0 !important;
    }
    .no-hover tr {
            user-select: unset !important;
            cursor: unset !important;
    }
`;t.BodyStyle=n},772:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.Alerts=void 0;var n=r(a(0)),o=a(9),i=a(32),l=a(129);t.Alerts=()=>{const e=(0,o.useDispatch)(),t=(0,o.useSelector)(e=>e.alert.alerts);return t?n.default.createElement(i.AlertStack,null,t.map(t=>{let{content:a,id:r,success:o,warning:s,critical:c,permanent:u,actions:d}=t;return n.default.createElement(i.AlertBar,{key:r,success:o,warning:s,critical:c,permanent:u,onHidden:()=>(t=>e((0,l.removeAlert)(t)))(r),actions:d},a)})):null}},773:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ButtonRow",{enumerable:!0,get:function(){return r.ButtonRow}});var r=a(774)},774:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonRow=void 0;var n,o=r(a(0)),i=a(1),l=a(32),s=a(93),c=a(775);const u=e=>{let{buttons:t,initialFocus:a,className:r}=e;return o.default.createElement(c.ButtonContainer,{className:r},t.map(e=>o.default.createElement(c.ButtonPadding,{key:e.label,title:e.tooltip},o.default.createElement(l.Button,{primary:e.primary,secondary:e.secondary,destructive:e.destructive,onClick:e.onClick,disabled:e.disabled||e.loading,icon:e.loading?n||(n=o.default.createElement(s.LoadingIcon,null)):e.icon&&o.default.createElement(s.Icon,{icon:s.icons[e.icon]}),small:e.small,large:e.large,initialFocus:a&&(e.primary||e.destructive)},e.label))))};t.ButtonRow=u,u.propTypes={buttons:(0,i.arrayOf)((0,i.shape)({label:i.string.isRequired,onClick:i.func.isRequired,icon:i.string.isRequired,tooltip:i.string,disabled:i.bool,loading:i.bool,small:i.bool,large:i.bool,primary:i.bool,secondary:i.bool,destructive:i.bool})).isRequired,className:i.string,initialFocus:i.bool}},775:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonPadding=t.ButtonContainer=void 0;var n=r(a(18));const o=n.default.div`
    display: flex;
    justify-content: flex-end;
    div:first-child {
        margin-left: 0px;
    }
`;t.ButtonContainer=o;const i=n.default.div`
    margin-left: 16px;
`;t.ButtonPadding=i},776:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.CardSection=void 0;var n=r(a(0)),o=r(a(18)),i=a(1),l=a(32);const s=(0,o.default)(l.Card)`
    margin-bottom: 16px;
    padding: 16px;
    height: unset !important;
`,c=o.default.h2`
    color: #0d0d0e;
    font-size: 1.25rem;
    margin-block-start: 1.6rem;
    margin-block-end: 1rem;
    margin-inline-start: 1rem;
    font-weight: 500;
`,u=o.default.div`
    position: absolute;
    top: 38px;
    right: 32px;
`,d=e=>{let{heading:t,children:a,buttons:r}=e;return n.default.createElement(s,null,n.default.createElement(c,null,t),!!r&&n.default.createElement(u,null,r),a)};t.CardSection=d,d.prototypes={heading:i.string.isRequired,children:(0,i.oneOfType)([i.node,(0,i.arrayOf)(i.node)]).isRequired}},777:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteModal=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),o=a(1),i=a(9),l=r(a(18)),s=a(32),c=a(95),u=a(393),d=a(213);function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}const E=l.default.div`
    margin: 8px 0;
    line-height: 24px;
`,f=e=>{let{secondaryAction:t,onDeleteSucccess:a,type:r}=e;const o=(0,i.useDispatch)(),l=(0,i.useSelector)(e=>e.data.deletePrompt),p=l===d.SUCCESS,f=l===d.LOADING;(0,n.useEffect)(()=>{p&&a()},[p]);const m="Delete "+r,g=`Are you sure you want to permanently delete this ${r}?`;return!l||p?null:n.default.createElement(s.Modal,{open:!0,small:!0},n.default.createElement(s.Modal.Title,null,m),n.default.createElement(s.Modal.Content,null,n.default.createElement(E,null,g)),n.default.createElement(s.Modal.Actions,null,n.default.createElement(s.ButtonStrip,{end:!0},n.default.createElement(u.RichButton,{secondary:!0,onClick:()=>(async e=>o((0,c.onDeleteConfirmed)(e,t)))(!1),icon:"clear",label:"Cancel",disabled:f}))))};t.DeleteModal=f,f.propTypes={secondaryAction:o.func,onDeleteSucccess:o.func.isRequired,type:(0,o.oneOf)(["record","isolate"]).isRequired}},778:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return r.Event}});var r=a(779)},779:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var n,o=r(a(0)),i=a(9),l=a(394),s=a(780);t.Event=()=>{const e=(0,i.useSelector)(e=>e.data.event.programStage),t=(0,i.useSelector)(e=>e.data.event.id),a=(0,i.useSelector)(e=>e.data.panel.valid);(0,i.useSelector)(e=>e);return a?t?o.default.createElement(o.default.Fragment,null,e.programStageSections.filter(e=>!e.hide&&!e.hideWithValues).map(e=>o.default.createElement(s.Section,{key:e.id,heading:e.displayName,dataElements:e.dataElements,childSections:e.childSections,renderType:e.renderType.DESKTOP.type}))):n||(n=o.default.createElement(l.LoadingSection,null)):null}},780:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.Section=void 0;var n=r(a(7)),o=r(a(0)),i=a(9),l=a(1),s=a(104),c=a(781);const u=e=>{let{heading:t,dataElements:a,childSections:r,renderType:l}=e;return o.default.createElement(s.CardSection,{heading:t},o.default.createElement(c.SectionContent,(0,n.default)({renderType:l},(()=>{const e=(0,i.useSelector)(e=>e.data.event.programStage.dataElements);a=a.filter(t=>!e[t].hide&&!e[t].hideWithValues),r=r.filter(e=>!e.hide&&!e.hideWithValues);const t=Math.ceil(r.length/2),n=Math.ceil(a.length/2+t);return{dataElements:a,childSections:r,half:n,childHalf:t}})())))};t.Section=u,u.propTypes={heading:l.string.isRequired,dataElements:(0,l.arrayOf)(l.string).isRequired,childSections:(0,l.arrayOf)(l.object).isRequired,renderType:l.string.isRequired}},781:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.SectionContent=void 0;var n=r(a(0)),o=a(1),i=a(29),l=a(395),s=a(807);const c=e=>{let{dataElements:t,half:a,childHalf:r,childSections:o,renderType:c}=e;const u=e=>n.default.createElement(s.ChildSection,{key:e.id,childSection:e});return t.length>0?"MATRIX"===c?n.default.createElement(i.Grid,{container:!0,spacing:0},t.map(e=>n.default.createElement(i.Grid,{item:!0,key:e},n.default.createElement(l.DataElement,{key:e,id:e})))):n.default.createElement(i.Grid,{container:!0,spacing:0},n.default.createElement(i.Grid,{item:!0,xs:!0},t.slice(0,a).map(e=>n.default.createElement(l.DataElement,{key:e,id:e}))),n.default.createElement(i.Grid,{item:!0,xs:!0},t.slice(a).map(e=>n.default.createElement(l.DataElement,{key:e,id:e})),o&&o.map(e=>u(e)))):n.default.createElement(i.Grid,{container:!0,spacing:0},n.default.createElement(i.Grid,{item:!0,xs:!0},o&&o.slice(0,r).map(e=>u(e))),n.default.createElement(i.Grid,{item:!0,xs:!0},o&&o.slice(r).map(e=>u(e))))};t.SectionContent=c,c.propTypes={dataElements:(0,o.arrayOf)(o.string).isRequired,half:o.number.isRequired,childHalf:o.number.isRequired,childSections:(0,o.arrayOf)(o.object).isRequired,renderType:o.string.isRequired}},782:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AgeInput",{enumerable:!0,get:function(){return r.AgeInput}}),Object.defineProperty(t,"CheckboxInputs",{enumerable:!0,get:function(){return n.CheckboxInputs}}),Object.defineProperty(t,"DateInput",{enumerable:!0,get:function(){return o.DateInput}}),Object.defineProperty(t,"RadioInputs",{enumerable:!0,get:function(){return i.RadioInputs}}),Object.defineProperty(t,"SelectInput",{enumerable:!0,get:function(){return l.SelectInput}}),Object.defineProperty(t,"SwitchInput",{enumerable:!0,get:function(){return s.SwitchInput}}),Object.defineProperty(t,"TextInput",{enumerable:!0,get:function(){return c.TextInput}}),Object.defineProperty(t,"TransferList",{enumerable:!0,get:function(){return u.TransferList}});var r=a(783),n=a(787),o=a(790),i=a(793),l=a(796),s=a(797),c=a(798),u=a(803)},783:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AgeInput",{enumerable:!0,get:function(){return r.AgeInput}});var r=a(784)},784:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.AgeInput=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),o=a(1),i=r(a(103)),l=a(785),s=a(786),c=a(138),u=a(256);function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}const p=e=>{const[t,a]=(0,n.useState)(""),[r,o]=(0,n.useState)("0"),[d,p]=(0,n.useState)("0"),[E,f]=(0,n.useState)("0");(0,n.useEffect)(()=>{e.value?e.value!==t&&m((0,i.default)(e.value)):(a(""),o("0"),p("0"),f("0"))},[e.value]);const m=t=>{const r=(0,i.default)();let n=t;const l=r.diff(n,"year");n=n.add(l,"year");const s=r.diff(n,"month");n=n.add(s,"month");const c=r.diff(n,"day");t=t.format("YYYY-MM-DD"),a(t),o(l.toString()),p(s.toString()),f(c.toString()),t!==e.value&&e.onChange(e.name,t)};return n.default.createElement(c.MinWidth,null,n.default.createElement(u.Label,{required:e.required},e.label),n.default.createElement(l.AgeFields,{years:r,months:d,days:E,disabled:e.disabled,onChange:async e=>{const a=e.target.name;let n=e.target.value;const o={value:t,years:r,months:d,days:E};n||(n="0"),n=parseInt(n),n<0||(o[a]=n-o[a],o.value=(o.value?(0,i.default)(o.value):(0,i.default)()).add(-o[a],a),m(o.value))}}),n.default.createElement(s.DateOfBirth,{name:e.name,value:t,disabled:e.disabled,onChange:m}))};t.AgeInput=p,p.propTypes={onChange:o.func.isRequired,name:o.string.isRequired,label:o.string.isRequired,required:o.bool,disabled:o.bool,value:o.string}},785:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.AgeFields=void 0;var n=r(a(0)),o=a(1),i=r(a(18)),l=a(32),s=a(255);const c=(0,i.default)(l.InputField)`
    margin-right: 16px;
    width: 121px;
    &:last-child {
        margin-right: 0px;
    }
`,u=e=>{let{days:t,months:a,years:r,disabled:o,onChange:i}=e;return n.default.createElement(s.Row,null,n.default.createElement(c,{name:"years",label:"Years",value:r,onChange:i,disabled:o,type:"number",dense:!0}),n.default.createElement(c,{name:"months",label:"Months",value:a,onChange:i,disabled:o,type:"number",dense:!0}),n.default.createElement(c,{name:"days",label:"Days",value:t,onChange:i,disabled:o,type:"number",dense:!0}))};t.AgeFields=u,u.propTypes={years:o.string,months:o.string,days:o.string,disabled:o.bool,onChange:o.func.isRequired}},786:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.DateOfBirth=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),o=a(1),i=r(a(18)),l=a(32),s=a(278),c=r(a(103));function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}const d=i.default.div`
    margin-top: 16px;
`,p=e=>{let{name:t,value:a,disabled:r,onChange:o}=e;const[i,u]=(0,n.useState)(null),p=e=>i.open(e),E=e=>{"Enter"===e.key&&i.open(e)};return n.default.createElement(s.DatePicker,{value:a,onChange:o,TextFieldComponent:()=>n.default.createElement(d,{onClick:r?null:p,onKeyPress:r?null:E},n.default.createElement(l.InputField,{name:t,label:"Date of Birth",value:""!==a?(0,c.default)(a).format("YYYY-MM-DD"):a,onChange:()=>{},disabled:r,dense:!0})),ref:u,disableFuture:!0})};t.DateOfBirth=p,p.propTypes={name:o.string.isRequired,value:o.string,disabled:o.bool,onChange:o.func.isRequired}},787:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"CheckboxInputs",{enumerable:!0,get:function(){return r.CheckboxInputs}});var r=a(788)},788:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxInputs=void 0;var n=r(a(11)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),i=a(1),l=a(256),s=a(255),c=a(789);function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}const p=e=>{const[t,a]=(0,o.useState)({});(0,o.useEffect)(()=>{e.values!==t&&a(e.values)},[e.values]);const r=r=>{let{target:o}=r;const i=o.name;let l=o.checked;const s=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t);l=l?"true":"",s[i]=l,a(s),e.onChange(i,l)};return o.default.createElement(o.default.Fragment,null,o.default.createElement(l.Label,{required:e.required},e.label),o.default.createElement(s.Row,null,Object.keys(e.objects).map(a=>o.default.createElement(c.CheckboxInput,{key:a,id:a,label:e.objects[a].label,checked:"true"===t[a],onChange:r,disabled:e.objects[a].disabled}))))};t.CheckboxInputs=p,p.propTypes={label:i.string.isRequired,onChange:i.func.isRequired,objects:i.object.isRequired,values:(0,i.objectOf)(i.string),required:i.bool}},789:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxInput=void 0;var n=r(a(0)),o=a(1),i=a(32),l=a(396);const s=e=>{let{id:t,label:a,checked:r,disabled:o,onChange:s}=e;return n.default.createElement(l.OptionSpacer,{onKeyDown:e=>{let{key:t,target:a}=e;"Enter"===t&&s({target:{name:a.name,checked:!r}})}},n.default.createElement(i.Checkbox,{name:t,label:a,checked:r,onChange:s,disabled:o,value:t}))};t.CheckboxInput=s,s.propTypes={id:o.string.isRequired,label:o.string.isRequired,checked:o.bool,onChange:o.func.isRequired,disabled:o.bool}},790:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DateInput",{enumerable:!0,get:function(){return r.DateInput}});var r=a(791)},791:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateInput=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),n=a(1),o=a(278),i=a(792);function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}const s=e=>{const[t,a]=(0,r.useState)(""),[n,l]=(0,r.useState)(null);(0,r.useEffect)(()=>{e.value!==t&&a(e.value)},[e.value]);return r.default.createElement(o.DatePicker,{value:t,onChange:t=>{a(t),e.onChange(e.name,t.format("YYYY-MM-DD"))},ref:l,TextFieldComponent:()=>r.default.createElement(i.TextField,{id:e.name,label:e.label,value:t,required:e.required,disabled:e.disabled,warning:!e.error&&e.warning,error:e.error,picker:n,small:e.small}),minDate:e.minDate,maxDate:e.maxDate,disableFuture:!0})};t.DateInput=s,s.propTypes={onChange:n.func.isRequired,name:n.string.isRequired,label:n.string.isRequired,required:n.bool,disabled:n.bool,value:n.string,small:n.bool}},792:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.TextField=void 0;var n=r(a(0)),o=a(1),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(18)),l=a(32),s=r(a(103)),c=a(138);function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}const d=(0,i.default)(c.MinWidth)`
    ${e=>{let{small:t}=e;if(t)return i.css`
                width: 100px;
                min-width: unset;
                input {
                    padding-left: 14px !important;
                }
            `}}
`,p=e=>{let{id:t,label:a,value:r,required:o,disabled:i,warning:c,error:u,picker:p,small:E}=e;return n.default.createElement(d,{onClick:i?null:e=>p.open(e),onKeyPress:i?null:e=>{"Enter"===e.key&&p.open(e)},small:E},n.default.createElement(l.InputField,{name:t,label:a,value:""!==r?(0,s.default)(r).format("YYYY-MM-DD"):r,onChange:()=>{},disabled:i,dense:!0,required:o,warning:c,error:u}),(u||c)&&n.default.createElement(l.Help,{warning:c,error:u},u||c))};t.TextField=p,p.propTypes={id:o.string.isRequired,label:o.string.isRequired,value:(0,o.oneOfType)([o.string,o.object]),required:o.bool,disabled:o.bool,warning:o.string,error:o.string,picker:o.object}},793:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RadioInputs",{enumerable:!0,get:function(){return r.RadioInputs}});var r=a(794)},794:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadioInputs=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),n=a(1),o=a(256),i=a(255),l=a(138),s=a(795);function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}const u=e=>{const[t,a]=(0,r.useState)("");(0,r.useEffect)(()=>{1===e.objects.length&&""===e.value?e.onChange(e.name,e.objects[0].value):e.value!==t&&a(e.value)},[e.value]);const n=t=>{let{target:r}=t;const n=r.value;a(n),e.onChange(e.name,n)};return r.default.createElement(l.MinWidth,null,r.default.createElement(o.Label,{required:e.required},e.label),r.default.createElement(i.Row,null,e.objects.map(a=>r.default.createElement(s.RadioInput,{key:a.value,label:a.label,value:a.value,checked:t===a.value,onChange:n,disabled:e.disabled,single:1===e.objects.length}))))};t.RadioInputs=u,u.propTypes={label:n.string.isRequired,onChange:n.func.isRequired,objects:(0,n.arrayOf)((0,n.shape)({value:n.string.isRequired,label:n.string.isRequired})).isRequired,value:n.string,required:n.bool,disabled:n.bool}},795:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.RadioInput=void 0;var n=r(a(0)),o=a(1),i=a(32),l=a(396);const s=e=>{let{label:t,value:a,checked:r,onChange:o,disabled:s,single:c}=e;return n.default.createElement(l.OptionSpacer,{onClick:e=>{let{target:t}=e;c||a===t.value&&o({target:{value:""}})},onKeyDown:e=>{let{key:t,target:r}=e;if("Enter"!==t||c)return;const n=a!==r.value?r.value:"";o({target:{value:n}})}},n.default.createElement(i.Radio,{name:a,value:a,label:t,checked:r,onChange:o,disabled:s}))};t.RadioInput=s,s.propTypes={label:o.string.isRequired,value:o.string.isRequired,checked:o.bool,onChange:o.func.isRequired,disabled:o.bool,single:o.bool}},796:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectInput=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),n=a(1),o=a(32),i=a(138);function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}const s=e=>{const[t,a]=(0,r.useState)("");(0,r.useEffect)(()=>{e.value!=t&&a(e.value)},[e.value]);return r.default.createElement(i.MinWidth,null,r.default.createElement(o.SelectField,{name:e.name,value:t,label:e.label,help:e.disabled?e.helperText:null,onChange:t=>{const r=t.target.value;a(r),e.onChange(e.name,r)},disabled:e.disabled,required:e.required,initialFocus:e.initialFocus,dense:!0},e.objects.map(e=>r.default.createElement("option",{key:e.value,value:e.value},e.label))))};t.SelectInput=s,s.propTypes={onChange:n.func.isRequired,name:n.string.isRequired,label:n.string.isRequired,required:n.bool,disabled:n.bool,helperText:n.string,value:n.string,objects:(0,n.arrayOf)((0,n.shape)({label:n.string.isRequired,value:n.string.isRequired})).isRequired}},797:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchInput=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=n?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),n=a(1),o=a(32);function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}const l=e=>{const[t,a]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e.value!==t&&a(e.value)},[e.value]);return r.default.createElement(o.Switch,{name:e.name,checked:t,label:e.label,disabled:e.disabled,onChange:t=>{const{checked:r}=t.target;a(r),e.onChange(e.name,r)}})};t.SwitchInput=l,l.propTypes={onChange:n.func.isRequired,name:n.string.isRequired,label:n.string.isRequired,disabled:n.bool,value:n.string}},798:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"TextInput",{enumerable:!0,get:function(){return r.TextInput}});var r=a(799)},799:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextInput=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),n=a(1),o=a(32),i=a(138),l=a(397),s=a(800),c=a(801),u=a(802);function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}const p=e=>{const[{value:t,validating:a,error:n},d]=(0,s.useValues)(),[p,E]=(0,c.useDebounce)(t,2e3);(0,r.useEffect)(()=>{e.value!==t&&d({type:l.types.VALUE_PROP,value:e.value})},[e.value]),(0,r.useEffect)(()=>{null!==p&&p===t&&p!==e.value&&("GpAu5HjWAEz"==e.name&&""!==p||"GpAu5HjWAEz"!=e.name)&&f(p)},[p]);const f=async t=>{await m(t),e.onChange(e.name,t,e.unique)},m=async t=>{const{name:a,label:r,required:n,unique:o,validateUnique:i}=e;let s;return n&&!t&&(s=l.texts.required),o&&i&&t&&(d({type:l.types.SET_VALIDATING,validating:!0}),await e.onValidation(a,t,r),d({type:l.types.SET_VALIDATING,validating:!1})),s};return r.default.createElement(i.MinWidth,{onKeyDown:e=>{let{key:a}=e;"Enter"===a&&E(t)}},r.default.createElement(u.StyledInputField,{required:e.required,name:e.name,label:e.label,value:t,onChange:e=>{let{target:t}=e;const r=t.value;a||d({type:l.types.SET_VALUE,value:r})},onBlur:()=>E(t),loading:e.loading||a,warning:!a&&!!e.warning,error:!a&&(!!n||e.uniqueInvalid||!!e.error),disabled:e.disabled,type:e.type,dense:!0,color:e.color}),(a||e.uniqueInvalid||n||e.error||e.warning)&&r.default.createElement(o.Help,{warning:!a&&!!e.warning,error:!a&&(!!n||e.uniqueInvalid||!!e.error)},e.loading||a?l.texts.validate:e.uniqueInvalid?l.texts.unique:n||(e.error?e.error:e.warning)))};t.TextInput=p,p.propTypes={onChange:n.func.isRequired,name:n.string.isRequired,label:n.string.isRequired,required:n.bool,unique:n.bool,disabled:n.bool,value:n.string,valid:n.bool,warning:n.string,error:n.string,uniqueInvalid:n.bool,validateUnique:n.bool,onValidation:n.func}},800:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.useValues=void 0;var n=r(a(11)),o=a(0),i=a(397);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const c=(e,t)=>{switch(t.type){case i.types.VALUE_PROP:return s(s({},e),{},{value:t.value,hashedValue:t.value});case i.types.SET_VALUE:return s(s({},e),{},{value:t.value});case i.types.SET_ERROR:return s(s({},e),{},{error:t.error});case i.types.SET_VALIDATING:return s(s({},e),{},{validating:t.validating});default:return e}};t.useValues=()=>(0,o.useReducer)(c,{value:"",validating:!1,error:null})},801:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDebounce=void 0;var r=a(0);t.useDebounce=(e,t)=>{const[a,n]=(0,r.useState)(e),o=(0,r.useRef)(!0);return(0,r.useEffect)(()=>{const a=setTimeout(()=>n(e),t);return()=>clearTimeout(a)},[e]),o.current?(o.current=!1,[null,n]):[a,n]}},802:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyledInputField=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=n?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}r.default=e,a&&a.set(e,r);return r}(a(18)),n=a(32);function o(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:t})(e)}const i=(0,r.default)(n.InputField)`
    ${e=>{switch(e.color){case"red":return r.css`
                    .content {
                        background-color: rgba(255, 0, 0, 0.082) !important;
                    }
                `;case"yellow":return r.css`
                    .content {
                        background-color: rgba(255, 255, 0, 0.082) !important;
                    }
                `;case"green":return r.css`
                    .content {
                        background-color: rgba(0, 255, 0, 0.082) !important;
                    }
                `;default:return null}}}
`;t.StyledInputField=i},803:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"TransferList",{enumerable:!0,get:function(){return r.TransferList}});var r=a(804)},804:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.TransferList=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),o=a(1),i=r(a(18)),l=a(805),s=a(806);function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}const u=i.default.section`
    display: flex;
    height: 264px;
    margin-top: 10px;
`,d=e=>Array.from(e,e=>{let{label:t,value:a}=e;return{label:t,value:a}}),p=e=>{let{options:t,onChange:a,selected:r}=e;const[o,i]=(0,n.useState)(r?t.filter(e=>!r.includes(e.value)):t),[c,p]=(0,n.useState)(r?t.filter(e=>r.includes(e.value)):[]),[E,f]=(0,n.useState)([]),[m,g]=(0,n.useState)([]),b=e=>{if(o.map(e=>e.value).includes(e.value)){const t=[...c,e];i([...o.filter(t=>t.value!==e.value)]),p(t),a(t)}else{const t=[...c.filter(t=>t.value!==e.value)];i([...o,e]),p(t),a(t)}g([]),f([])};return n.default.createElement(u,null,n.default.createElement(l.MultiSelect,{options:o,onChange:e=>{let{target:t}=e;return f(d(t.selectedOptions))},onDoubleClick:b}),n.default.createElement(s.TransferButtons,{onLeft:()=>{const e=[...c.filter(e=>!m.map(e=>e.value).includes(e.value))];p(e),i([...o,...m]),g([]),f([]),a(e)},disableLeft:!m.length,onRight:()=>{const e=[...c,...E];i([...o.filter(e=>!E.map(e=>e.value).includes(e.value))]),p(e),g([]),f([]),a(e)},disableRight:!E.length,onSwitch:()=>{if(o.length){const e=[...c,...o];p(e),i([]),g([]),f([]),a(e)}else i([...c]),p([]),g([]),f([]),a([])},disableSwitch:!t.length}),n.default.createElement(l.MultiSelect,{options:c,onChange:e=>{let{target:t}=e;return g(d(t.selectedOptions))},onDoubleClick:b}))};t.TransferList=p,p.propTypes={options:(0,o.arrayOf)((0,o.shape)({label:o.string.isRequired,value:o.string.isRequired})).isRequired,onChange:o.func.isRequired}},805:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.MultiSelect=void 0;var n=r(a(0)),o=a(1),i=r(a(18)),l=a(32);const s=i.default.option`
    &:hover {
        background: ${l.colors.grey200};
    }
`,c=i.default.select`
    flex: 1;
    border-width: 1px;
    border-style: solid;
    border-color: rgb(74, 87, 104);
    border-image: initial;
    border-radius: 4px;
    overflow-y: auto;
    outline: unset;
    &:focus {
        border-color: ${l.colors.teal400};
    }
`,u=e=>{let{onChange:t,onDoubleClick:a,options:r}=e;return n.default.createElement(c,{onChange:t,multiple:!0},r.map(e=>{let{label:t,value:r}=e;return n.default.createElement(s,{key:r,value:r,onDoubleClick:()=>a({label:t,value:r})},t)}))};t.MultiSelect=u,u.propTypes={onChange:o.func.isRequired,options:(0,o.arrayOf)((0,o.shape)({label:o.string.isRequired,value:o.string.isRequired})).isRequired}},806:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.TransferButtons=void 0;var n=r(a(0)),o=a(1),i=r(a(18)),l=a(32),s=a(93);const c=(0,i.default)(l.Button)`
    padding: 0 !important;
    width: 36px;
    margin: 4px 8px;
`,u=i.default.div`
    display: flex;
    flex-direction: column;
    justify-content: center;
`,d=e=>{let{onLeft:t,onRight:a,disableLeft:r,disableRight:o,onSwitch:i,disableSwitch:l}=e;return n.default.createElement(u,null,n.default.createElement(c,{onClick:t,disabled:r},n.default.createElement(s.Icon,{icon:s.icons.chevron_left})),n.default.createElement(c,{onClick:a,disabled:o},n.default.createElement(s.Icon,{icon:s.icons.chevron_right})),n.default.createElement(c,{onClick:i,disabled:l},n.default.createElement(s.Icon,{icon:s.icons.code})))};t.TransferButtons=d,d.propTypes={onLeft:o.func.isRequired,onRight:o.func.isRequired,disableLeft:o.bool,disableRight:o.bool,onSwitch:o.func.isRequired}},807:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.ChildSection=void 0;var n=r(a(0)),o=a(9),i=a(1),l=r(a(18)),s=a(32),c=a(94),u=a(395),d=a(95),p=a(254);const E=l.default.div`
    color: ${s.colors.grey600};
    white-space: nowrap;
    padding-bottom: 12px;
    line-height: 24px;
    font-weight: 500;
    margin: 16px 16px -16px;
`,f=(0,l.default)(u.DataElement)`
    padding-top: 0px;
`,m=e=>{let{childSection:t}=e;const a=(0,o.useDispatch)(),r=(0,o.useSelector)(e=>e.data.event.programStage.dataElements),i=(0,o.useSelector)(e=>e.data.event.status.completed),l=(e,t)=>{a((0,d.setEventValue)(e,t,!1))};if(t.dataElements.filter(e=>"TRUE_ONLY"===r[e].valueType).length>t.dataElements.length-2){const e={},a={};return t.dataElements.filter(e=>"TRUE_ONLY"===r[e].valueType).forEach(t=>{e[t]={label:r[t].displayFormName,disabled:r[t].disabled||i},a[t]=(0,o.useSelector)(e=>e.data.event.values[t])}),n.default.createElement(n.default.Fragment,null,n.default.createElement(p.Padding,null,n.default.createElement(c.CheckboxInputs,{objects:e,name:t.name,label:t.name,values:a,onChange:l})),t.dataElements.filter(e=>"TRUE_ONLY"!==r[e].valueType).map(e=>n.default.createElement(f,{key:e,id:e})))}return n.default.createElement(n.default.Fragment,null,n.default.createElement(E,null,t.name),t.dataElements.map(e=>n.default.createElement(u.DataElement,{key:e,id:e})))};t.ChildSection=m,m.propTypes={childSection:i.object.isRequired}},808:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.IconContainer=t.IconButton=void 0;var n=r(a(0)),o=a(1),i=r(a(18)),l=a(32),s=a(93);const c=i.default.div`
    display: flex;
    align-items: center;
    margin-top: auto;
    margin-bottom: auto;
    height: 64px;
    width: 64px;
    border-radius: 50%;
    cursor: pointer;
    &:hover {
        fill: ${l.theme.secondary600};
        background-color: rgba(0, 0, 0, 0.08);
    }
`;t.IconContainer=c;const u=e=>{let{tooltip:t,onClick:a,icon:r}=e;return n.default.createElement(c,{title:t,onClick:a},n.default.createElement(s.Icon,{icon:s.icons[r],size:40}))};t.IconButton=u,u.propTypes={tooltip:o.string.isRequired,onClick:o.func.isRequired,icon:o.string.isRequired}},809:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.MainSection=void 0;const n=r(a(18)).default.main`
    width: 100%;
    overflow-x: auto;
    padding: ${e=>{let{padded:t}=e;return t?"16px 4%":"16px 32px"}};
`;t.MainSection=n},810:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataLoader=void 0;var r,n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),o=a(9),i=a(1),l=a(398),s=a(95),c=a(130);function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}const d=e=>{let{isIsolate:t,children:a,action:i}=e;const u=(0,o.useDispatch)(),d=(0,o.useSelector)(e=>e.metadata.status);return(0,n.useEffect)(()=>{i?i():u((0,s.setMetadata)(t))},[]),d===c.ERROR?null:d===c.LOADING?r||(r=n.default.createElement(l.OverlayedLoader,null)):a};t.MetadataLoader=d,d.propTypes={isIsolate:i.bool,children:i.node.isRequired,action:i.func}},811:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ModalPopup",{enumerable:!0,get:function(){return r.ModalPopup}});var r=a(812)},812:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.ModalPopup=void 0;var n=r(a(0)),o=a(1),i=r(a(18)),l=a(104),s=a(813);const c=i.default.div`
    margin: 8px 0;
    line-height: 24px;
`,u=e=>{let{heading:t,text:a,onClick:r,label:o,icon:i,primary:u,destructive:d,disabled:p,loading:E}=e;return n.default.createElement(s.Background,null,n.default.createElement(s.CustomCard,null,n.default.createElement(s.ModalTitle,null,t),n.default.createElement(c,null,a),n.default.createElement(l.ButtonRow,{initialFocus:!0,buttons:[{label:"Cancel",icon:"clear",onClick:()=>r(!1),secondary:!0,disabled:p},{label:o,icon:i,onClick:()=>r(!0),primary:u,destructive:d,disabled:p,loading:E}]})))};t.ModalPopup=u,u.propTypes={heading:o.string.isRequired,onClick:o.func.isRequired,label:o.string.isRequired,icon:o.string.isRequired,primary:o.bool,destructive:o.bool,disabled:o.bool,loading:o.bool}},813:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.ModalTitle=t.CustomCard=t.Background=void 0;var n=r(a(18)),o=a(32);const i=n.default.div`
    display: flex;
    position: fixed;
    justify-content: center;
    align-items: baseline;
    z-index: 1;
    padding-top: 62px;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(33, 43, 54, 0.4);
`;t.Background=i;const l=n.default.h1`
    font-size: 20px;
    font-weight: 500;
    line-height: 24px;
`;t.ModalTitle=l;const s=(0,n.default)(o.Card)`
    width: 400px !important;
    height: auto !important;
    padding: 24px;
`;t.CustomCard=s},814:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Panel",{enumerable:!0,get:function(){return r.Panel}});var r=a(815)},815:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.Panel=void 0;var n,o=r(a(11)),i=r(a(0)),l=a(9),s=a(29),c=a(254),u=a(104),d=a(94),p=a(95),E=a(816);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.Panel=e=>{let{showEdit:t}=e;const a=(0,l.useSelector)(e=>e.data.entity.valid),r=(0,l.useSelector)(e=>e.data.editable),o=((0,l.useSelector)(e=>e.data.previousValues),(0,l.useDispatch)()),{stageLists:f}=(0,l.useSelector)(e=>e.metadata),{program:g,programStage:b,organism:v,sampleDate:y,valid:O,programs:h,defaultProgram:S,organisms:_}=(0,l.useSelector)(e=>e.data.panel),T=async(e,t)=>{o((0,p.setProgram)(t))},P=(e,t)=>o((0,p.setPanelValue)(e,t)),j=e=>{const t={disabled:O,required:!0};switch(e){case"defaultProgram":return A(m(m({},t),{},{id:"program",name:"program",label:"Organism group",objects:S,onChange:T,value:g}));case"program":return A(m(m({},t),{},{id:"program",name:"program",label:"Organism group",objects:h,onChange:T,value:g}));case"programStage":return A(m(m({},t),{},{id:"programStage",name:"programStage",label:"Type",objects:f[g],onChange:P,value:b}));case"organism":return A(m(m({},t),{},{id:"organism",name:"organism",label:"Organism",objects:_,onChange:P,value:v}));case"sampleDate":return A(m(m({},t),{},{id:"sampleDate",name:"sampleDate",label:"Date of Sample",onChange:P,value:y}));default:return}},A=e=>i.default.createElement(c.Padding,{key:e.id},e.objects?e.objects.length<4?i.default.createElement(d.RadioInputs,e):i.default.createElement(d.SelectInput,e):i.default.createElement(d.DateInput,e));return a?i.default.createElement(u.CardSection,{heading:"Panel",buttons:t&&(n||(n=i.default.createElement(E.PanelButtons,null)))},i.default.createElement(s.Grid,{container:!0,spacing:0},i.default.createElement(s.Grid,{item:!0,xs:!0},S.length&&!r?j("defaultProgram"):j("program"),g&&f[g].length>=1&&j("programStage")),i.default.createElement(s.Grid,{item:!0,xs:!0},g&&_.length?j("organism"):"",j("sampleDate")))):null}},816:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.PanelButtons=void 0;var n=r(a(0)),o=a(9),i=a(104),l=a(95);t.PanelButtons=()=>{const e=(0,o.useDispatch)(),t=[{label:"Reset",onClick:()=>e((0,l.resetPanel)()),icon:"clear",tooltip:"Reset",kind:"secondary",small:!0}];return n.default.createElement(i.ButtonRow,{buttons:t})}},817:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.Table=void 0;var n=r(a(0)),o=a(1),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(18)),l=a(32),s=r(a(280));function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}const u=(0,i.default)(l.Card)`
    height: unset !important;
    ${e=>{let{noShadow:t}=e;if(t)return i.css`
                box-shadow: none !important;
            `}}
`,d=e=>{let{rows:t,headers:a,onRowClick:r,title:o,noShadow:i}=e;return n.default.createElement(u,{noShadow:i},n.default.createElement(s.default,{title:o,data:t,columns:a,options:{selectableRows:"none",elevation:0,onRowClick:r,responsive:"stacked",rowHover:!!r},className:r?"":"no-hover"}))};t.Table=d,d.propTypes={onRowClick:o.func,rows:(0,o.arrayOf)((0,o.arrayOf)(o.string)).isRequired,headers:(0,o.arrayOf)((0,o.shape)({name:o.string.isRequired,options:o.object})).isRequired,title:o.string,boxShadow:o.bool}},832:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.TitleRow=void 0;var n=r(a(0)),o=a(1),i=r(a(18)),l=a(104);const s=i.default.h1`
    display: block;
    font-size: 2em;
    margin-block-start: 0.67em;
    margin-block-end: 0.67em;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    font-weight: 500;
`,c=i.default.div`
    display: flex;
`,u=i.default.div`
    display: flex;
    justify-content: space-between;
    align-items: center;
`,d=e=>{let{title:t,history:a,button:r}=e;return n.default.createElement(u,null,n.default.createElement(c,null,a&&n.default.createElement(l.IconButton,{tooltip:"Go back",icon:"arrow_back",onClick:a.goBack}),n.default.createElement(s,null,t)),r)};t.TitleRow=d,d.propTypes={title:o.string.isRequired,history:o.object,button:o.node}},833:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducers=void 0;var r=a(834),n=a(835),o=a(836),i=a(837),l=a(838);const s={alert:r.alert,appConfig:n.appConfig,metadata:o.metadata,selectedOrgUnit:i.selectedOrgUnit,data:l.data};t.reducers=s},834:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.alert=void 0;var n=r(a(11)),o=a(66);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const s={nextId:0,alerts:[]};t.alert=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,{type:t,payload:a}=arguments.length>1?arguments[1]:void 0;switch(t){case o.ADD_ALERT:return{nextId:e.nextId+1,alerts:[...e.alerts,l(l({},a),{},{id:e.nextId})]};case o.REMOVE_ALERT:return{nextId:e.nextId,alerts:e.alerts.filter(e=>{let{id:t}=e;return t!==a})};default:return e}}},835:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appConfig=void 0;t.appConfig=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e}},836:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.metadata=void 0;var n=r(a(11)),o=a(130),i=a(66);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const c={status:o.LOADING};t.metadata=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,{type:t,payload:a}=arguments.length>1?arguments[1]:void 0;switch(t){case i.METADATA_RECEIVED:return s({status:o.READY},a);case i.METADATA_ERRORED:return{status:o.ERROR};default:return e}}},837:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectedOrgUnit=void 0;var r=a(66);t.selectedOrgUnit=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,{type:t,payload:a}=arguments.length>1?arguments[1]:void 0;switch(t){case r.ORG_UNIT_SELECTED:return a;default:return e}}},838:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.data=void 0;var n=r(a(11)),o=a(130),i=a(214),l=a(86),s=a(66);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const d={dataElements:null,values:null,programStage:null,status:{},id:null,rules:null,duplicate:!1,invalid:i.REQUIRED_EMPTY},p={previousValues:{},btnStatus:!1,editable:!1,pageFirst:!1,removebtn:!1,eventEditable:!1,eventList:[],exit:!1,entity:{values:null,id:null,attributes:null,uniques:[],valid:!1},panel:{program:"",programStage:"",organism:"",sampleDate:"",defaultProgram:l.SAMPLE_TESTING_PROGRAM,valid:!1},event:d,buttonLoading:!1,aggregationOnProgress:!1,completeClicked:!1};t.data=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,{type:t,payload:a}=arguments.length>1?arguments[1]:void 0;switch(t){case s.SET_PREVIOUS_ENTITY:return u(u({},e),{},{previousValues:a.entity});case s.SET_INITIAL_PROGRAM:return u(u({},e),{},{panel:{defaultProgram:a}});case s.LOAD_DATAELEMENTS:return u(u({},e),{},{dataElements:a});case s.RESET_PREVIOUS_ENTITY:return u(u({},e),{},{previousValues:{}});case s.ADD_ENTITY:return u(u({},e),{},{entity:a.previousValues});case s.SET_ENTITY:return u(u({},e),{},{entity:{values:a.values,id:a.id,valid:a.valid,attributes:a.attributes,uniques:a.uniques,modal:null}});case s.SET_ENTITY_VALUE:return u(u({},e),{},{entity:u(u({},e.entity),{},{values:a.values,attributes:a.attributes,valid:a.valid})});case s.SET_UNIQUE:return u(u({},e),{},{entity:u(u({},e.entity),{},{uniques:u(u({},e.entity.uniques),{},{[a.key]:a.value})})});case s.SET_ENTITY_MODAL_AND_UNIQUES:return u(u({},e),{},{entity:u(u({},e.entity),{},{modal:a.modal,uniques:a.uniques})});case s.SET_MODAL_LOADING:return u(u({},e),{},{entity:u(u({},e.entity),{},{modal:u(u({},e.entity.modal),{},{loading:a})})});case s.SET_EDITING:return u(u({},e),{},{entity:u(u({},e.entity),{},{editing:!0})});case s.SET_PANEL:return u(u({},e),{},{panel:u(u({},e.panel),{},{program:a.program,programStage:a.programStage,organism:a.organism,sampleDate:a.sampleDate,organisms:a.organisms,valid:a.valid})});case s.SET_PANEL_VALUE:return u(u({},e),{},{panel:u(u({},e.panel),{},{[a.key]:a.value,valid:a.valid})});case s.RESET_PANEL:return u(u({},e),{},{event:d,panel:u(u({},e.panel),{},{program:"",programStage:"",organism:"",sampleDate:e.panel.sampleDate,valid:!1,completeClicked:!1})});case s.RESET_SAMPLE_PANEL_EVENT:return u(u({},e),{},{panel:u(u({},e.panel),{},{program:"",programStage:"",organism:"",sampleDate:e.panel.sampleDate,valid:!1}),event:d,buttonsDisabled:!1});case s.COMPLETED_CLICKED:return u(u({},e),{},{completeClicked:a});case s.PAGE_FIRST:return u(u({},e),{},{pageFirst:a});case s.SET_ENTITY_AND_ORG_UNIT:return u(u({},e),{},{pageFirst:!0,entity:{values:a.values,id:a.id,valid:a.valid,attributes:a.attributes,uniques:{},modal:null},panel:u(u({},e.panel),{},{programs:a.programs}),orgUnit:a.orgUnit});case s.RESET_DATA:return u(u({},e),{},{pageFirst:!1,editable:!1,eventEditable:!1,eventList:[],exit:!1,entity:{values:null,id:null,attributes:null,uniques:[],valid:!1},panel:{program:"",programStage:"",organism:"",sampleDate:e.panel.sampleDate,defaultProgram:e.panel.defaultProgram,valid:!1},event:d,buttonLoading:!1});case s.PANEL_EDITABLE:return u(u({},e),{},{editable:!0});case s.EXISTING_TEI_DATA_RECEIVED:return u(u({},e),{},{btnStatus:a.btnStatus,eventEditable:a.editable,eventList:a.eventList,entity:{values:a.entityValues,id:a.TeiID,attributes:a.entityAttributes,uniques:{},valid:!0,modal:null},orgUnit:a.orgUnit});case s.EXISTING_DATA_RECEIVED:return u(u({},e),{},{btnStatus:a.btnStatus,eventEditable:a.editable,eventList:a.eventList,entity:{values:a.entityValues,id:a.entityId,attributes:a.entityAttributes,uniques:{},valid:!0,modal:null},panel:u(u({},e.panel),{},{program:a.program,programStage:a.programStage.id,organism:a.eventValues[l.ORGANISM_ELEMENT],sampleDate:a.sampleDate,programs:a.programs,organisms:a.organisms,valid:!0}),event:{values:a.eventValues,programStage:a.programStage,status:a.status,id:a.eventId,rules:a.rules,duplicate:!1,invalid:a.invalid},orgUnit:a.orgUnit,previousValues:{},pageFirst:!1});case s.EXISTING_DATA_ERRORED:case s.NEW_EVENT_ERRORED:return u(u({},e),{},{status:o.ERROR});case s.DISABLE_BUTTONS:return u(u({},e),{},{buttonsDisabled:!0});case s.ENABLE_BUTTONS:return u(u({},e),{},{buttonsDisabled:!1});case s.REMOVE_BUTTONS:return u(u({},e),{},{removebtn:a});case s.SET_EVENT:return u(u({},e),{},{event:a});case s.SET_PREVIOUS_EVENT:return u(u({},e),{},{previousValues:a.eventValues});case s.RESET_PANEL_EVENT:return u(u({},e),{},{panel:u(u({},e.panel),{},{program:"",programStage:"",organism:"",sampleDate:e.panel.sampleDate,valid:!1}),event:d,buttonsDisabled:!1,completeClicked:!1});case s.SET_INCOMPLETED:return u(u({},e),{},{event:u(u({},e.event),{},{status:u(u({},e.event.status),{},{completed:!1})}),buttonsDisabled:!1});case s.SET_COMPLETED:return u(u({},e),{},{event:u(u({},e.event),{},{status:u(u({},e.event.status),{},{completed:!0})})});case s.SET_DELETE_PROMPT:return u(u({},e),{},{deletePrompt:a});case s.SET_EVENT_VALUE:return u(u({},e),{},{event:u(u({},e.event),{},{values:u(u({},e.event.values),{},{[a.key]:a.value})})});case s.SET_EVENT_AND_ENTITY:return u(u({},e),{},{entity:u(u({},e.entity),{},{id:a.entityId}),event:u(u({},e.event),{},{id:a.eventId,programStage:a.programStage,rules:a.rules,status:a.status,values:a.values,invalid:a.invalid})});case s.SET_EVENT_VALUES_AND_PROGRAMSTAGE:return u(u({},e),{},{event:u(u({},e.event),{},{programStage:a.programStage,values:a.values,invalid:a.invalid})});case s.DUPLICACY:return u(u({},e),{},{event:u(u({},e.event),{},{duplicate:a})});case s.EXIT:return u(u({},e),{},{exit:!0});case s.SET_BUTTON_LOADING:return u(u({},e),{},{buttonLoading:a});case s.AGGREGATION_ON_PROGRESS:return u(u({},e),{},{aggregationOnProgress:a});default:return e}}},839:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.store=void 0;var n=a(840),o=r(a(841));r(a(842));const i=[o.default];t.store=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.createStore)((0,n.combineReducers)(e),t,(0,n.applyMiddleware)(...i))}},843:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(844);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}))},844:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hash=void 0;var r=a(845);t.hash=e=>(0,r.createHash)("sha512").update(e).digest("hex")},849:function(e,t){},851:function(e,t){},86:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TEST_RESULT_ELEMENT=t.SAMPLE_TESTING_PROGRAM=t.SAMPLE_ID_ELEMENT=t.PERSON_TYPE=t.ORGANISM_SET=t.ORGANISM_ELEMENT=t.ORGANISM_DETECTED=t.L2_REVISION_REASON=t.L2_REJECTION_REASON=t.L2_APPROVAL_STATUS=t.L1_REVISION_REASON=t.L1_REJECTION_REASON=t.L1_APPROVAL_STATUS=t.IS_ISOLATE_ELEMENT=t.DEO_GROUP=t.AMR_ELEMENT=void 0;t.ORGANISM_ELEMENT="SaQe2REkGVw";t.TEST_RESULT_ELEMENT="bSgpKbkbVGL";t.SAMPLE_ID_ELEMENT="GpAu5HjWAEz";t.AMR_ELEMENT="lIkk661BLpG";t.IS_ISOLATE_ELEMENT="ugtQC30LNua";t.PERSON_TYPE="tOJvIFXsB5V";t.L1_APPROVAL_STATUS="tAyVrNUTVHX";t.L1_REJECTION_REASON="NLmLwjdSHMv";t.L1_REVISION_REASON="wCNQtIHJRON";t.L2_APPROVAL_STATUS="sXDQT6Yaf77";t.L2_REJECTION_REASON="pz8SoHBO6RL";t.L2_REVISION_REASON="fEnFVvEFKVc";t.DEO_GROUP="mYdK5QT4ndl";t.ORGANISM_SET="TUCsBvqwTUV";t.ORGANISM_DETECTED="MOsgkq0ptBm";t.SAMPLE_TESTING_PROGRAM=[{value:"L7bu48EI54J",label:"Sample Testing"}]},861:function(e,t){},863:function(e,t){},890:function(e,t){},891:function(e,t){},896:function(e,t){},898:function(e,t){},905:function(e,t){},924:function(e,t){},93:function(e,t,a){"use strict";a.r(t),a.d(t,"Icon",(function(){return p})),a.d(t,"LoadingIcon",(function(){return m})),a.d(t,"icons",(function(){return s})),a.d(t,"colors",(function(){return l}));var r=a(0),n=a.n(r),o=a(1),i=a(18);const l={primary:"#147cd7",secondary:"#00796b",blue:"#147cd7",teal:"#00796b",red:"#c62828",yellow:"#ff8302",green:"#388e3c",white:"#ffffff",black:"#212934"},s={add:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z",arrow_back:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",check_circle_outline:"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z",clear:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",delete:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z",done:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z",edit:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z",error_outline:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z",help_outline:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z",highlight_off:"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z",home:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z",pause_circle_outline:"M9 16h2V8H9v8zm3-14C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm1-4h2V8h-2v8z",person:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z",info:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z",chevron_left:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z",chevron_right:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z",code:"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z",print:"M19 8h-1V3H6v5H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zM8 5h8v3H8V5zm8 12v2H8v-4h8v2zm2-2v-2H6v2H4v-4c0-.55.45-1 1-1h14c.55 0 1 .45 1 1v4h-2z",arrow_forward:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"},c=Object(o.oneOf)(Object.keys(l).map(e=>l[e])),u=Object(o.oneOf)(Object.keys(s).map(e=>s[e])),d=i.default.svg`
    width: 24px;
    height: 24px;
    flex-shrink: 0;
    ${e=>{let{size:t,color:a}=e;return t?i.css`
                margin: auto;
                width: ${t}px;
                height: ${t}px;
            `:a?i.css`
                fill: ${l[a]};
            `:void 0}}
`;d.propTypes={size:o.number,color:c};const p=e=>{let{icon:t,color:a,size:r}=e;return n.a.createElement(d,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",color:a,size:r},n.a.createElement("path",{d:t}))};var E;p.propTypes={icon:u.isRequired,size:o.number,color:c};const f=i.default.svg`
    fill: white;
    color: white;
    width: 24px;
    height: 24px;
    animation: anim-rotate 1.4s linear infinite;
    circle {
        stroke: currentColor;
        stroke-dasharray: 80px, 200px;
        stroke-dashoffset: 0;
        animation: anim-dash 1.4s ease-in-out infinite;
    }
    @keyframes anim-rotate {
        100% {
            transform: rotate(360deg);
        }
    }
    @keyframes anim-dash {
        0% {
            stroke-dasharray: 1px, 200px;
            stroke-dashoffset: 0;
        }
        50% {
            stroke-dasharray: 100px, 200px;
            stroke-dashoffset: -15px;
        }
        100% {
            stroke-dasharray: 100px, 200px;
            stroke-dashoffset: -120px;
        }
    }
`,m=e=>{let{className:t}=e;return n.a.createElement(f,{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"22 22 44 44",className:t},E||(E=n.a.createElement("circle",{cx:"44",cy:"44",r:"20.2",fill:"none",strokeWidth:"3.6"})))}},94:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(782);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}))},940:function(e,t,a){},95:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={createAction:!0,setOrgUnit:!0};Object.defineProperty(t,"createAction",{enumerable:!0,get:function(){return o.createAction}}),Object.defineProperty(t,"setOrgUnit",{enumerable:!0,get:function(){return s.setOrgUnit}});var n=a(129);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=a(96),i=a(480);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var l=a(540);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var s=a(541),c=a(66);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}))},957:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.StyledList=t.OrgUnitTree=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),o=a(1),i=r(a(18)),l=a(958),s=a(963);function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}const u=i.default.ul`
    list-style-type: none;
    margin: 0;
    padding: 16px;
`;t.StyledList=u;const d=e=>{let{onSelect:t,onError:a,roots:r}=e;const{data:o,error:i}=(0,l.useOrgUnits)(r),[c,d]=(0,n.useState)(null);(0,n.useEffect)(()=>{o&&p({id:o[0].id,path:o[0].path,displayName:o[0].displayName,code:o[0].code})},[o]),(0,n.useEffect)(()=>{i&&(console.error(i),a())},[i]);const p=e=>{d(e),t(e)};return c?n.default.createElement(u,null,o.map(e=>n.default.createElement(s.OrgUnitNode,{key:e.id,orgUnit:e,selected:c,onSelect:p}))):null};t.OrgUnitTree=d,d.propTypes={onSelect:o.func.isRequired,onError:o.func,roots:(0,o.arrayOf)((0,o.shape)({children:o.array.isRequired,displayName:o.string.isRequired,id:o.string.isRequired,path:o.string.isRequired,code:o.string.isRequired}))}},958:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useOrgUnits=void 0;var r=a(0),n=a(959),o=a(962);t.useOrgUnits=e=>{const[t,a]=(0,r.useState)(!0),[i,l]=(0,r.useState)(null),[s,c]=(0,r.useState)();return(0,r.useEffect)(()=>{e?c(e):(async()=>{try{const e=(await(0,n.getUserOrgUnits)()).organisationUnits.map(e=>e.id),t=(await Promise.all(e.map(e=>(0,n.getOrgUnits)(e)))).map(e=>(0,o.toOrgUnitTree)(e.organisationUnits));c(t),a(!1)}catch(i){console.error(i),l(i)}})()},[]),{data:s,loading:t,error:i}}},959:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getOrgUnits",{enumerable:!0,get:function(){return r.getOrgUnits}}),Object.defineProperty(t,"getUserOrgUnits",{enumerable:!0,get:function(){return n.getUserOrgUnits}});var r=a(960),n=a(961)},96:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAction=void 0;t.createAction=(e,t)=>({type:e,payload:t})},960:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOrgUnits=void 0;var r=a(36);t.getOrgUnits=async e=>await(0,r.get)((0,r.request)("organisationUnits",{order:"level:asc",fields:["children","displayName","id","path, code"],filters:"path:ilike:"+e}))},961:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserOrgUnits=void 0;var r=a(36);t.getUserOrgUnits=async()=>await(0,r.get)((0,r.request)("me",{fields:"organisationUnits"}))},962:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toOrgUnitTree=void 0;const r=e=>{e.children.forEach(e=>r(e)),e.children.sort((e,t)=>e.displayName>t.displayName?1:t.displayName>e.displayName?-1:0)};t.toOrgUnitTree=e=>{const t=e[0];return e.forEach((t,a)=>{if(0!==a){const a=t.path.split("/").slice(1,-1);let r=a.shift(),n=e.find(e=>e.path.endsWith(r));for(;!n;)r=a.shift(),n=e.find(e=>e.path.endsWith(r));for(;a.length>0;)r=a.shift(),n=n.children.find(e=>r===e.id);if(n){const e=n.children;e[e.findIndex(e=>e.id===t.id)]=t}}}),r(t),t}},963:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrgUnitNode=void 0;var r,n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),o=a(1),i=a(964),l=a(965),s=a(966),c=a(967),u=a(968);function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}const p=e=>{let{orgUnit:t,selected:a,onSelect:o}=e;const[d,E]=(0,n.useState)(!1);(0,n.useEffect)(()=>{E(a.path.includes(t.id))},[a.path,t.id]);return n.default.createElement("li",{key:t.id},n.default.createElement(u.Row,null,t.children.length>0?n.default.createElement(i.Caret,{opened:d,onClick:()=>E(!d)}):r||(r=n.default.createElement(c.NoCaret,null)),n.default.createElement(s.Label,{isSelected:a.id===t.id,onClick:()=>{a.id!==t.id&&o({id:t.id,path:t.path,displayName:t.displayName,code:t.code})}},t.displayName)),t.children.length>0&&d?n.default.createElement(l.ChildTree,{opened:d},t.children.map(e=>n.default.createElement(p,{key:e.id,orgUnit:e,selected:a,onSelect:o}))):null)};t.OrgUnitNode=p,p.propTypes={orgUnit:o.object.isRequired,selected:o.object.isRequired,onSelect:o.func.isRequired}},964:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Caret=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=n(t);if(a&&a.has(e))return a.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}r.default=e,a&&a.set(e,r);return r}(a(18));function n(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(n=function(e){return e?a:t})(e)}const o=r.default.span`
    cursor: pointer;
    user-select: none;
    line-height: 22px;
    &::before {
        content: '\\2023';
        color: black;
        display: inline-block;
        margin-right: 5px;
    }
    ${e=>e.opened&&r.css`
            &:before {
                transform: rotate(90deg);
            }
        `}
`;t.Caret=o},965:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChildTree=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=n(t);if(a&&a.has(e))return a.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}r.default=e,a&&a.set(e,r);return r}(a(18));function n(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(n=function(e){return e?a:t})(e)}const o=r.default.ul`
    list-style-type: none;
    padding-left: 20px;
    ${e=>!e.opened&&r.css`
            display: none;
        `}
`;t.ChildTree=o},966:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Label=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=n(t);if(a&&a.has(e))return a.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}r.default=e,a&&a.set(e,r);return r}(a(18));function n(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(n=function(e){return e?a:t})(e)}const o=a(32).theme.secondary600,i=r.default.span`
    cursor: pointer;
    user-select: none;
    line-height: 22px;
    white-space: nowrap;
    &:hover {
        color: ${o};
    }
    ${e=>e.isSelected&&r.css`
            color: ${o};
            cursor: unset;
        `}
`;t.Label=i},967:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.NoCaret=void 0;const n=r(a(18)).default.span`
    user-select: none;
    &::before {
        content: '\\2007';
        display: inline-block;
        margin-right: 5px;
    }
`;t.NoCaret=n},968:function(e,t,a){"use strict";var r=a(3);Object.defineProperty(t,"__esModule",{value:!0}),t.Row=void 0;const n=r(a(18)).default.div`
    display: flex;
    flex-direction: row;
`;t.Row=n},969:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(35),i=a.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(12);var s=a(9),c=a(18);var u=a(41),d=a(122),p=a(280),E=a.n(p);const f=Object(c.default)(d.a)`
    height: unset !important;
`,m=e=>{let{title:t,rows:a,headers:r,onEventClick:o}=e;return n.a.createElement(f,null,n.a.createElement(E.a,{title:t,data:a,columns:r,options:{selectableRows:"none",elevation:0,onRowClick:o,responsive:"stacked"}}))};var g=a(36);const b=async(e,t,a)=>{let{user:r,status:n}=a;return(await Object(g.get)(Object(g.request)(`sqlViews/${e}/data`,{options:["var=orgunit:"+t,"var=username:"+r,...n?["var=status:"+n]:[]]}))).listGrid.rows};var v=a(128),y=a.n(v);const O={programs:function(e){return fetch("../../../api/organisationUnits/"+e+".json?fields=id,name,programs[id,name]&paging=false",{method:"GET"}).then(e=>e.json())}};const h={rows:null,loading:!0,addButtonDisabled:!0,error:!1},S=(e,t)=>{switch(t.type){case"NEW_PROGRAMS":return{...e,addButtonDisabled:t.disable};case"LOADING":return{...e,loading:!0};case"NEW_ROWS":return{...e,rows:t.rows,loading:!1};case"EVENTS_ERRORED":return{...e,rows:t.rows,error:!0};default:return e}},_=e=>{const t=Object(s.useDispatch)(),a=Object(s.useSelector)(e=>e.appConfig.categories),n=Object(s.useSelector)(e=>e.metadata.programList),o=Object(s.useSelector)(e=>e.metadata.user),i=Object(s.useSelector)(e=>e.selectedOrgUnit.id),[c,u]=Object(r.useReducer)(S,h);return Object(r.useEffect)(()=>{const e=!n.find(e=>e.orgUnits.includes(i));e!==c.addButtonDisabled&&u({type:"NEW_PROGRAMS",disable:e})},[i,n,c.addButtonDisabled]),Object(r.useEffect)(()=>{u({type:"LOADING"}),(async()=>{try{await(async e=>{var t=[],a={};new Date,new Date((new Date).setDate((new Date).getDate()-60));let r="../../../api/trackedEntityInstances.json?ouMode=DESCENDANTS&program=L7bu48EI54J&ou="+e+"&lastUpdatedStartDate=2021-01-01&paging=false";const n=y.a.get(r),o=y.a.get("../../../api/sqlViews/WKhh3qxwcPW/data.json?paging=false");return y.a.all([n,o]).then(y.a.spread((function(){const e=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1];return e.data.trackedEntityInstances&&(r.data.listGrid.rows&&r.data.listGrid.rows.forEach(e=>{var t={},r=e[0],n=e[1],o="",i="",l="",s="";if(!a.hasOwnProperty(n)){i=e[5]?e[5]:"No data to show";var c=JSON.parse(e[3].value);for(const[e,a]of Object.entries(c))t.hasOwnProperty(e)||(t[e]=[a.value,a.created]);l=t.mp5MeJ2dFQz?t.mp5MeJ2dFQz[0]:"No data to show",t.GpAu5HjWAEz&&(o=t.GpAu5HjWAEz[0]),t.B7XuDaXPv10&&(s=t.B7XuDaXPv10[0]),a[n]=[r,i,l,o,s]}}),e.data.trackedEntityInstances.forEach((e,r)=>{const n=e.trackedEntityInstance,o=e.orgUnit;t[r]=["","","","","","","","","","",""],e.attributes.forEach(e=>{"nFrlz82c6jS"===e.attribute&&(t[r][0]=e.value),"D6QGzhnkKOW"===e.attribute&&(t[r][1]=e.value),"DfXY7WHFzyc"===e.attribute&&(t[r][3]=e.value),"VXRRpqAdrdK"===e.attribute&&(t[r][4]=e.value),"ZgUp0jFVxdY"===e.attribute&&(t[r][5]=e.value),t[r][6]=o,t[r][7]=n,n in a&&(t[r][8]=a[n][1],t[r][9]=a[n][2],t[r][10]=a[n][3],t[r][2]=a[n][4])})})),t}))).then(e=>e).catch(e=>{console.error(e)})})(i).then(e=>u({type:"NEW_ROWS",rows:e}))}catch(e){console.error(e),u({type:"EVENTS_ERRORED"}),t(Object(l.showAlert)("Failed to get records",{critical:!0}))}})()},[i,e,a,t,o.username]),c},T={loadDataElements:function(){return fetch("../../../api/dataElements.json?fields=name,code,id,displayName,formName,&paging=false",{method:"GET"}).then(e=>e.json())},pushEvent:function(e,t,a){const r={method:"PUT",credentials:"include",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}};return fetch("../../../api/events/"+t+"/"+a,r).then(e=>e.json())}};const{titles:P,headers:j}={headers:[{name:"CR Number"},{name:"Name of the Patient"},{name:"Location"},{name:"Age"},{name:"Sex"},{name:"Address"},{name:"Organisation unit ID",options:{display:!1}},{name:"Tracked Entity Instance ID",options:{display:!1}},{name:"Sample Collection Date"},{name:"Sample Type"},{name:"Lab ID"}]},A={true:"You cannot add records for the selected location",false:"Add new record"},R=e=>{let{match:t,history:a}=e;const o=t.params.status,i=Object(s.useDispatch)(),c=Object(s.useSelector)(e=>e.selectedOrgUnit),{rows:u,loading:d,addButtonDisabled:p,error:E}=_(o);Object(r.useEffect)(()=>{T.loadDataElements().then(e=>{i(Object(l.setDataELments)(e.dataElements))}),O.programs(c.id).then(e=>{if(e.programs.filter(e=>"Sample Testing_HP"==e.name)){let e=[{value:"L7bu48EI54J",label:"Sample Testing"}];i(Object(l.addSelectedProgramOfOrgUnits)(e))}else{let e=[{value:"L7bu48EI54J",label:"Sample Testing"}];i(Object(l.addSelectedProgramOfOrgUnits)(e))}})});return n.a.createElement(l.MainSection,null,n.a.createElement(l.TitleRow,{button:n.a.createElement("div",{title:A[p]},n.a.createElement(l.RichButton,{primary:!0,large:!0,icon:"add",label:"Add record",disabled:p,onClick:()=>a.push(`/orgUnit/${c.id}/event/`)}))}),!E&&(d?n.a.createElement(l.LoadingSection,null):n.a.createElement(m,{rows:u,headers:j,onEventClick:e=>{a.push(`/orgUnit/${e[6]}/trackedEntityInstances/${e[7]}`)},title:c.displayName})))};var D=a(80),I=a(1),w=a(29);const M=e=>{let{entityValid:t,showEdit:a,id:r}=e;const o=Object(s.useDispatch)(),i=()=>o(Object(l.setEditing)()),c=[{label:"Edit",onClick:i,icon:"edit",tooltip:"Edit",kind:"secondary",small:!0}],u=[{label:"Edit",onClick:i,icon:"edit",tooltip:"Edit",kind:"secondary",small:!0},{label:"Reset",onClick:()=>o(Object(l.resetEntity)()),icon:"clear",tooltip:"Reset",kind:"secondary",small:!0}];return n.a.createElement(l.ButtonRow,{buttons:r?c:u})};var N=a(452),C=a(192);const L=c.default.div`
    margin: 8px 0;
    line-height: 24px;
`,k=()=>{const e=Object(s.useDispatch)(),t=Object(s.useSelector)(e=>e.data.entity.modal),a=t=>e(Object(l.removeModal)(t));return t?n.a.createElement(N.a,{open:!0,small:!0},n.a.createElement(N.a.Title,null,"Person found"),n.a.createElement(N.a.Content,null,n.a.createElement(L,null,"A person with the same ",n.a.createElement("em",null,t.label)," is already registered. Do you want to get this person?")),n.a.createElement(N.a.Actions,null,n.a.createElement(C.a,{end:!0},n.a.createElement(l.RichButton,{secondary:!0,onClick:()=>a(!1),icon:"clear",label:"Cancel",disabled:t.loading}),n.a.createElement(l.RichButton,{primary:!0,onClick:()=>a(!0),loading:t.loading,icon:"person",label:"Import",initialFocus:!0})))):null};var V=a(94);const U=c.default.div`
    padding: 16px;
`,x=e=>{let{attribute:t}=e;const a=Object(s.useDispatch)(),{optionSets:r}=Object(s.useSelector)(e=>e.metadata),{id:o,editing:i}=Object(s.useSelector)(e=>e.data.entity),c=t.trackedEntityAttribute.id,u=Object(s.useSelector)(e=>e.data.entity.values[c]),d=Object(s.useSelector)(e=>e.data.entity.uniques[c]),p=Object(s.useSelector)(e=>e.data.entity.modal),E=!(!o||i),f=(e,t)=>{t!==u&&a(Object(l.setEntityValue)(e,t))};return t.hide?null:n.a.createElement(U,null,"AGE"===t.trackedEntityAttribute.valueType?n.a.createElement(V.AgeInput,{required:t.mandatory,unique:t.trackedEntityAttribute.unique,name:t.trackedEntityAttribute.id,label:t.trackedEntityAttribute.displayName,value:u,onChange:f,disabled:E}):t.trackedEntityAttribute.optionSetValue?r[t.trackedEntityAttribute.optionSet.id].length<4?n.a.createElement(V.RadioInputs,{required:t.mandatory,objects:r[t.trackedEntityAttribute.optionSet.id],name:t.trackedEntityAttribute.id,label:t.trackedEntityAttribute.displayName,value:u,onChange:f,disabled:E}):n.a.createElement(V.SelectInput,{required:t.mandatory,objects:r[t.trackedEntityAttribute.optionSet.id],name:t.trackedEntityAttribute.id,label:t.trackedEntityAttribute.displayName,value:u,onChange:f,disabled:E}):n.a.createElement(V.TextInput,{required:t.mandatory,unique:t.trackedEntityAttribute.unique,uniqueInvalid:!1===d,validateUnique:!0,onValidation:async(e,t,r)=>await a(Object(l.validateUnique)(e,t,r)),name:t.trackedEntityAttribute.id,label:t.trackedEntityAttribute.displayName,value:u,onChange:f,disabled:E||t.trackedEntityAttribute.unique&&(o||!!p),type:"NUMBER"===t.trackedEntityAttribute.valueType?"number":"text"}))},q=e=>{let{showEdit:t}=e;const a=Object(s.useSelector)(e=>e.data.entity.valid),{person:o}=Object(s.useSelector)(e=>e.metadata),i=Object(s.useSelector)(e=>e.data.entity.id),c=Object(s.useSelector)(e=>e.data.entity.attributes),u=(Object(s.useSelector)(e=>e.data.entity.editing),Object(s.useSelector)(e=>e.metadata.programs));var d=!1;u.forEach(e=>{e.programStages.forEach(e=>{d=e.access.data.write})});const[p]=Object(r.useState)(Math.floor(o.trackedEntityTypeAttributes.length/2));return c?n.a.createElement(l.CardSection,{heading:"Person",buttons:d&&n.a.createElement(M,{entityValid:a,showEdit:t,id:i})},n.a.createElement(k,null),n.a.createElement(w.Grid,{container:!0,spacing:0},n.a.createElement(w.Grid,{item:!0,xs:!0},c.slice(0,p).map(e=>n.a.createElement(x,{attribute:e,key:e.trackedEntityAttribute.id}))),n.a.createElement(w.Grid,{item:!0,xs:!0},c.slice(p).map(e=>n.a.createElement(x,{attribute:e,key:e.trackedEntityAttribute.id}))))):n.a.createElement(l.LoadingSection,null)};q.prototypes={showEdit:I.bool};var G=a(92),B=a(188),W=a(392),z=a(187),F=(a(940),a(33)),Y=a.n(F),$=a(83),H=a.n($),X=a(281),K=a(1014),Q=a(204),J=a.n(Q),Z=a(1015),ee=a(286),te=a(1008),ae=a(1016),re=a(53),ne=a.n(re),oe=a(1010);a(451);const ie=Object(oe.a)({root:{},tableRightBorder:{borderWidth:0,borderRightWidth:1,borderColor:"black",borderStyle:"solid"}});function le(e){const t=ie(),[a,o]=n.a.useState(!0),i=Object(r.useRef)();var l=Object(s.useSelector)(e=>e.data.entity.values);const c=Object(s.useSelector)(e=>e.metadata.dataElementObjects);var u=Object(s.useSelector)(e=>e.data.eventList),d=Object(s.useSelector)(e=>e.data.dataElements);let p=[],E=Object.values(c),f=u.filter(e=>"L7bu48EI54J"!==e.program),m={"Reg Date":""};f.forEach(e=>{if("COMPLETED"===e.status){let t={"Hospital department":"","Lab ID":"",Pathogen:"","Patient Location":"","Sample type":"",EventDate:"","AMR ID":"",Organism:"",dataValue:[]},a=[];t.EventDate=e.eventDate.split("T")[0],m["Reg Date"]=e.created.split("T")[0],e.dataValues.forEach(e=>{let r=E.filter(t=>{if(t.id===e.dataElement)return t.value=e.value,t});if("B7XuDaXPv10"!==r[0].id&&"GpAu5HjWAEz"!==r[0].id&&"mp5MeJ2dFQz"!==r[0].id&&"dRKIjwIDab4"!==r[0].id&&"SaQe2REkGVw"!==r[0].id&&"dRKIjwIDab4"!==r[0].id&&"lIkk661BLpG"!==r[0].id&&a.push(r[0]),"B7XuDaXPv10"===e.dataElement&&(t["Patient Location"]=e.value),"dRKIjwIDab4"===e.dataElement&&(t["Hospital department"]=e.value),"GpAu5HjWAEz"===e.dataElement&&(t["Lab ID"]=e.value),"mp5MeJ2dFQz"===e.dataElement&&(t["Sample type"]=e.value),"dRKIjwIDab4"===e.dataElement&&(t["Hospital department"]=e.value),"SaQe2REkGVw"===e.dataElement){let a=d.filter(t=>t.code===e.value);t.Organism=a[0].name}"lIkk661BLpG"===e.dataElement&&(t["AMR ID"]=e.value)});let r=[];for(let e of a){let t=parseInt(e.value);Number.isInteger(t)||"DeFdBFxsFcj"!==e.id&&"tQa6uU1t6s3"!==e.id&&"YoCmEMUlZxb"!==e.id&&r.push(e)}t.dataValue=r,p.push(t)}});const g=Object(X.useReactToPrint)({content:()=>i.current,onAfterPrint:()=>b()}),b=()=>{o(!1),e.onPrint(!1)},v=p.map(e=>n.a.createElement(K.a,{sx:{border:1,fontSize:10,ml:6,mr:6,mt:1,mb:1}},n.a.createElement(Z.a,{sx:{["& ."+ee.a.root]:{borderBottom:"none"}}},n.a.createElement(w.TableBody,null,n.a.createElement(ae.a,null,n.a.createElement(te.a,{style:{width:"40%"}},n.a.createElement(w.Typography,null,n.a.createElement(K.a,{className:"boxClass",sx:{fontSize:12,m:1}},"Hospital Department"," :\xa0\xa0",e["Hospital department"]))),n.a.createElement(te.a,{style:{width:"30%"}},n.a.createElement(w.Typography,null,n.a.createElement(K.a,{className:"boxClass",sx:{fontSize:12,m:1}},"Sample Type"," :\xa0\xa0",e["Sample type"]))),n.a.createElement(te.a,{style:{width:"30%",textAlign:"right"}},n.a.createElement(w.Typography,null,n.a.createElement(K.a,{className:"boxClass",sx:{fontSize:12,m:1}},"AMR ID :\xa0\xa0",e["AMR ID"])))),n.a.createElement(ae.a,null,n.a.createElement(te.a,{style:{width:"40%"}},n.a.createElement(w.Typography,null,n.a.createElement(K.a,{className:"boxClass",sx:{fontSize:12,m:1}},"Lab ID"," :\xa0\xa0",e["Lab ID"]))),n.a.createElement(te.a,{style:{width:"30%"}},n.a.createElement(w.Typography,null,n.a.createElement(K.a,{className:"boxClass",sx:{fontSize:12,m:1}},"Patient Location"," :\xa0\xa0",e["Patient Location"]))),n.a.createElement(te.a,{style:{width:"30%",textAlign:"right"}},n.a.createElement(w.Typography,null,n.a.createElement(K.a,{className:"boxClass",sx:{fontSize:12,m:1}},"Sample Date",": :\xa0\xa0",J()(e.EventDate).format("DD/MM/yyyy"))))),n.a.createElement(ae.a,null,n.a.createElement(te.a,{style:{width:"40%"}},n.a.createElement(w.Typography,null,n.a.createElement(K.a,{className:"boxClass",sx:{fontSize:12,m:1}},"Organism Detected"," :\xa0\xa0\xa0\xa0",e.Organism))),n.a.createElement(te.a,null),n.a.createElement(te.a,null)))),n.a.createElement(Z.a,null,n.a.createElement(w.TableBody,null,n.a.createElement(K.a,{sx:{border:1,fontSize:10,ml:20,mr:20,mt:1,mb:1,borderBottom:0,borderRight:0}},e.dataValue.map((e,a)=>n.a.createElement(ae.a,null,n.a.createElement(te.a,{className:t.tableRightBorder+" antibio",style:{width:"10%",borderBottom:"1px solid black"}},n.a.createElement(w.Typography,null,n.a.createElement(K.a,{className:"boxClass",sx:{fontSize:12,m:1}},a+1))),n.a.createElement(te.a,{className:t.tableRightBorder+" antibio",style:{width:"60%",textAlign:"center",borderBottom:"1px solid black"}},n.a.createElement(w.Typography,null,n.a.createElement(K.a,{className:"boxClass",sx:{fontSize:12,m:1}},e.formName))),n.a.createElement(te.a,{className:"antibio",style:{borderBottom:"1px solid black"}},n.a.createElement(w.Typography,null,n.a.createElement(K.a,{className:"boxClass",sx:{fontSize:12,m:1}}))),n.a.createElement(te.a,{className:t.tableRightBorder+" antibio",style:{width:"60%",textAlign:"left",borderBottom:"1px solid black"}},n.a.createElement(w.Typography,null,n.a.createElement(K.a,{className:"boxClass",sx:{fontSize:12,m:1}},e.value))))))))));return n.a.createElement(w.Dialog,{fullWidth:!0,maxWidth:"md",open:a,onClose:b,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},n.a.createElement(w.DialogContent,{dividers:!0,ref:i},n.a.createElement(ne.a,{container:!0},n.a.createElement(ne.a,null,n.a.createElement("span",{style:{padding:"15px",marginLeft:"10px",marginRight:"150px",fontWeight:"bold"}},"Microbiology Laboratory Report Form"," "))),n.a.createElement(K.a,{sx:{border:"1px solid black",fontSize:12,m:1}},n.a.createElement(K.a,{sx:{border:2,fontSize:12,ml:6,mr:6,mt:1,mb:1}},n.a.createElement(Z.a,{sx:{["& ."+ee.a.root]:{borderBottom:"none"}}},n.a.createElement(w.TableBody,null,n.a.createElement(ae.a,null,n.a.createElement(te.a,{style:{width:"30%"}},n.a.createElement(w.Typography,null,n.a.createElement(K.a,{className:"boxClass",sx:{fontSize:12,m:1}},"Registration Number"," :\xa0\xa0\xa0\xa0",l.nFrlz82c6jS))),n.a.createElement(te.a,{style:{width:"40%",textAlign:"center"}},n.a.createElement(w.Typography,null,n.a.createElement(K.a,{className:"boxClass",sx:{fontSize:12,m:1}},"Patient Name"," :\xa0\xa0\xa0\xa0",l.D6QGzhnkKOW))),n.a.createElement(te.a,{style:{width:"30%",textAlign:"right"}},n.a.createElement(w.Typography,null,n.a.createElement(K.a,{className:"boxClass",sx:{fontSize:12,m:1}},"Registration Date"," :\xa0\xa0\xa0\xa0",J()(m["Reg Date"]).format("DD/MM/yyyy"))))),n.a.createElement(ae.a,null,n.a.createElement(te.a,{style:{width:"30%"}},n.a.createElement(w.Typography,null,n.a.createElement(K.a,{className:"boxClass",sx:{fontSize:12,m:1}},"Gender"," :\xa0\xa0\xa0\xa0",l.VXRRpqAdrdK))),n.a.createElement(te.a,{style:{width:"30%",textAlign:"center"}},n.a.createElement(w.Typography,null,n.a.createElement(K.a,{className:"boxClass",sx:{fontSize:12,m:1}},"Age"," :\xa0\xa0\xa0\xa0",J()().diff(l.DfXY7WHFzyc,"years")," y"))))))),v)),n.a.createElement(w.DialogActions,null,n.a.createElement(w.Button,{onClick:b,color:"secondary"},"Cancel"),n.a.createElement(w.Button,{onClick:g,variant:"contained",color:"primary"},"Print")))}var se={customAttributeMetadataTypeIdentifier:"Metadata_type",locationCode:"Location",departmentCode:"Department",pathogenCode:"Organism",sampleTypeCode:"SampleType",sampleAndLocationCC_Code:"sampleAndLocation",antibioticCC_Code:"antibiotic",defaultCC_code:"default",antibioticAttributeCode:"Antibiotic",defaultDataSetCode:"organismsIsolated",antibioticWiseDataSetCode:"organismsIsolatedAntibioticWise",codesOfProgramsToAggregate:[]};let ce=async e=>{let{period:t,dataSet:a,de:r,orgUnit:n,cc:o,cp:i,co:l,operation:s}=e,c=await Object(g.get)(Object(g.request)("dataValues.json",{options:[`pe=${t}&ds=${a}&de=${r}&ou=${n}&cc=${o}&cp=${i}&co=${l}`]})),u=0;if("Conflict"===c.httpStatus||(u=parseInt(c[0])),"COMPLETE"===s)u+=1;else{if("INCOMPLETE"!==s)return{response:!1,message:`Received an invalid value when aggregating for dataSet,${a}.`};u=0==u?0:u-1}return{response:!0,value:u}};const ue=async e=>{let{event:t,operation:a,dataElements:r,categoryCombos:n,dataSets:o,orgUnit:i,programs:l,changeStatus:s,sampleDate:c}=e,u="";if(l.forEach(e=>{e.programStages.forEach(a=>{a.id===t.programStage.id&&(u=e.code)}),se.codesOfProgramsToAggregate.push(e.code)}),-1===se.codesOfProgramsToAggregate.indexOf(u))return{response:!0,message:"Ignored program"};s(!0);let d=r.attributeGroups[se.locationCode][0],p=t.values[d],E=r.attributeGroups[se.pathogenCode][0],f=t.values[E],m=r.attributeGroups[se.sampleTypeCode][0],b=t.values[m],v=r.attributeGroups[se.departmentCode][0],y=t.values[v];if(!(p&&f&&b&&y)){if("COMPLETE"===a)return{response:!1,message:"Mandatory fields missing"};if("INCOMPLETE"===a)return{response:!0,message:"Ignored aggregation"}}if(t.status.completed&&"COMPLETE"===a)return{response:!0,message:"Event already completed."};if(!t.status.completed&&"INCOMPLETE"===a)return{response:!0,message:"Ignored aggregation"};let O=n[se.sampleAndLocationCC_Code].id,h=n[se.sampleAndLocationCC_Code].categoryOptions[p];h=h+";"+n[se.sampleAndLocationCC_Code].categoryOptions[b],h=h+";"+n[se.sampleAndLocationCC_Code].categoryOptions[y];let S=[];Object.keys(t.values).forEach(e=>{if(""!==t.values[e]&&r[e][se.customAttributeMetadataTypeIdentifier]===se.antibioticAttributeCode){let a=[r[e].code,t.values[e]];a=a.sort();let o=a.join("");o=n[se.antibioticCC_Code].categoryOptionCombos[o],S.push(o)}});let _=r[f].id,T=r[f+"_AW"].id,P=n[se.defaultCC_code].categoryOptionCombos[se.defaultCC_code],j=o[se.defaultDataSetCode],A=o[se.antibioticWiseDataSetCode],R=c.substring(0,7).replace("-",""),D=await ce({period:R,dataSet:j,de:_,orgUnit:i,cc:O,cp:h,co:P,operation:a}),I=0;if(!D.response)return s(!1),{response:!1,message:D.message};I=D.value;try{let e=await Object(g.post)(Object(g.request)("dataValues.json",{options:[`pe=${R}&ds=${j}&de=${_}&ou=${i}&cc=${O}&cp=${h}&value=${I}&co=${P}`],data:{}}));return console.error("Post request not working. Response received:",e),s(!1),{response:!1,message:"Unable to send data to data set"}}catch(w){if(!w.toString().startsWith("SyntaxError: Unexpected end of JSON"))return console.error("Error in posting default value",w),s(!1),{response:!1,message:"Unable to send data to data set"}}for(let M in S){let e=S[M],t=await ce({period:R,dataSet:A,de:T,cc:O,cp:h,co:e,orgUnit:i,operation:a}),r=0;if(!t.response)return s(!1),{response:!1,message:t.message};r=t.value;try{let t=await Object(g.post)(Object(g.request)("dataValues.json",{options:[`pe=${R}&ds=${A}&de=${T}&ou=${i}&cc=${O}&cp=${h}&value=${r}&co=${e}`],data:{}}));return console.error("Post request not working. Response received:",t),s(!1),{response:!1,message:"Unable to aggregate data"}}catch(w){if(!w.toString().startsWith("SyntaxError: Unexpected end of JSON"))return console.error("Unable to post data",w),s(!1),{response:!1,message:"Unable to aggregate data"}}}return s(!1),{response:!0,message:"Successfull"}};var de=Object(u.o)(e=>{let{match:t,history:a}=e;const o=Object(s.useDispatch)();var i=Object(s.useSelector)(e=>e.metadata),c=Object(s.useSelector)(e=>e.data.eventList),u=Object(s.useSelector)(e=>e.metadata.programs),[d,p]=Object(r.useState)(!1),E=t.params.teiId,f=t.params.orgUnit;const m=Object(s.useSelector)(e=>e.metadata.categoryCombos),b=Object(s.useSelector)(e=>e.metadata.dataElementObjects),v=Object(s.useSelector)(e=>e.metadata.dataSets);var y=Object(s.useSelector)(e=>e.data.aggregationOnProgress);Object(r.useEffect)(()=>{Y()("#msg1").hide(),Y()("#succes1").hide()});const O=e=>{p(!!e||e)},h=e=>{o(Object(l.setAggregationProgress)(e)),y=e};return n.a.createElement(l.CardSection,{heading:"Event List"},n.a.createElement("div",{className:"btn"},n.a.createElement(D.a,{primary:!0,onClick:()=>(o(Object(l.addPreviousEntity)()),void a.push(`/orgUnit/${f}/event/`))},"Add Sample"),"\xa0\xa0\xa0",n.a.createElement(D.a,{primary:!0,onClick:O},"Report"),"\xa0\xa0\xa0",n.a.createElement(D.a,{destructive:!0,onClick:()=>{Y()("#msg1").show()}},"Delete Record"),"\xa0\xa0\xa0",d&&n.a.createElement("div",{id:"btn"},n.a.createElement(le,{onPrint:O}))),n.a.createElement("div",{className:"sidebar"},n.a.createElement(W.a,null,n.a.createElement(G.a,null,n.a.createElement(B.a,null,n.a.createElement("b",null,"Program Name")),n.a.createElement(B.a,null,n.a.createElement("b",null,"Location")),n.a.createElement(B.a,null,n.a.createElement("b",null,"Lab Sample ID")),n.a.createElement(B.a,null,n.a.createElement("b",null,"Sample Type")),n.a.createElement(B.a,null,n.a.createElement("b",null,"Organism")),n.a.createElement(B.a,null,n.a.createElement("b",null,"Event Date"))),n.a.createElement(z.a,null,(()=>{if(void 0!=c){return c.map((e,t)=>{if(e){var a=e.program,r=[],i=[],s=[],c=[];c.value=e.eventDate.substring(0,10);for(let e of u)e.id==a&&(r.value=e.name);for(let t of e.dataValues)i[0]=r,"B7XuDaXPv10"==t.dataElement&&(i[1]=t),"GpAu5HjWAEz"==t.dataElement&&(i[2]=t),"mp5MeJ2dFQz"==t.dataElement&&(i[3]=t),"SaQe2REkGVw"!=t.dataElement&&"u8VDCIwa3w4"!=t.dataElement||(i[4]=t),i[5]=c;if(!i[1]){let e=[{value:""}];i[1]=e}if(!i[2]){let e=[{value:""}];i[2]=e}if(!i[3]){let e=[{value:""}];i[3]=e}if(!i[4]){let e=[{value:""}];i[4]=e}return"Pathogens"!==i[4].value&&(s=i),n.a.createElement(n.a.Fragment,null,s.length?n.a.createElement(G.a,null,s.map(e=>n.a.createElement(B.a,null,e.value)),n.a.createElement(D.a,{primary:!0,onClick:()=>((e,t,a)=>{localStorage.setItem("eventId",t);let r=!1;for(let n of a){"u8VDCIwa3w4"==n.dataElement&&(r=!0)}o(Object(l.getExistingEvent)(e,E,t,!0,r))})(e.orgUnit,e.event,e.dataValues)},"Edit")):"")}})}})()))),n.a.createElement("div",{id:"msg1"},n.a.createElement(H.a,{warning:!0,showCancel:!0,confirmBtnText:"Yes, delete it!",confirmBtnBsStyle:"danger",title:"Are you sure?",customButtons:n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,{disabled:y,primary:!0,onClick:e=>(async e=>{e.preventDefault();let t=!0;for(let a in c){let e=c[a],r=await Object(l.getEventObject)(i,e.orgUnit,e.trackedEntityInstance,e.event,!0,!1),n=e.eventDate;(await ue({event:r,operation:"INCOMPLETE",dataElements:b,categoryCombos:m,dataSets:v,orgUnit:f,programs:u,sampleDate:n,changeStatus:h})).response?await Object(g.deleteEvent)(r.eventId).then(e=>{"OK"!==e.httpStatus&&(t=!1)}):t=!1}h(!1),t&&Object(g.deleteTEI)(E).then(e=>{"OK"==e.httpStatus&&Y()("#succes1").show()}),Y()("#msg1").hide()})(e)},"Yes"),"\u2003\u2003\u2003",n.a.createElement(D.a,{disabled:y,onClick:e=>(e=>{e.preventDefault(),Y()("#msg1").hide()})(e)},"No"))},"You will not able to recover this TEI Detail!")),n.a.createElement("div",{id:"succes1"},n.a.createElement(H.a,{success:!0,title:"TEI Delete success",customButtons:n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,{primary:!0,onClick:e=>{a.goBack()}},"Ok"),"\u2003\u2003\u2003")})))});const pe=Object(c.default)(l.ButtonRow)`
    margin: 0px;
`,Ee=e=>{let{history:t,existingEvent:a}=e;const r=Object(s.useDispatch)(),o=Object(s.useSelector)(e=>e.data.buttonsDisabled);var i=Object(s.useSelector)(e=>e.data.btnStatus);const c=Object(s.useSelector)(e=>e.data.event.status),u=Object(s.useSelector)(e=>e.data.event),d=Object(s.useSelector)(e=>e.data.event.id),p=Object(s.useSelector)(e=>e.data.event.invalid),E=Object(s.useSelector)(e=>e.data.panel.valid),f=Object(s.useSelector)(e=>e.data.event.duplicate),m=(Object(s.useSelector)(e=>e.data.exit),Object(s.useSelector)(e=>e.metadata.dataElementObjects)),g=Object(s.useSelector)(e=>e.metadata.programs),b=Object(s.useSelector)(e=>e.metadata.categoryCombos),v=Object(s.useSelector)(e=>e.metadata.dataSets),y=Object(s.useSelector)(e=>e.data.orgUnit),O=Object(s.useSelector)(e=>e.data.buttonLoading),h=Object(s.useSelector)(e=>e.data.pageFirst),S=Object(s.useSelector)(e=>e.data.removebtn),_=!!Object.keys(Object(s.useSelector)(e=>e.data.previousValues)).length,T=Object(s.useSelector)(e=>e.data.completeClicked),P=Object(s.useSelector)(e=>e.data.entity.valid);var{sampleDate:j,defaultProgram:A}=Object(s.useSelector)(e=>e.data.panel),R=Object(s.useSelector)(e=>e.data.editable),D=!(A.length&&!R&&j),I=Object(s.useSelector)(e=>e.data.aggregationOnProgress),{program:w}=Object(s.useSelector)(e=>e.data.panel),M="L7bu48EI54J"!=w,N=!1;g.forEach(e=>{e.programStages.forEach(e=>{N=e.access.data.write})});const C=e=>{r(Object(l.setAggregationProgress)(e)),I=e},L=()=>{!_&&R?Y()("#popup").hide():(t.goBack(),setTimeout((function(){window.location.reload()}),100))},k=async(e,t,a)=>await r(Object(l.nextEvent)(e,t,a)),V=async(e,t)=>await r(Object(l.saveEvent)(e,t)),U={label:"Submit and add new sample",onClick:async()=>await k(!1,!0,!1),disabled:D,icon:"add",primary:!0,tooltip:f===l.DUPLICATE_ERROR?l.DUPLICATE_ERROR:p||"Submit record and add new record for the same person",loading:"submitAdd"===O},x={label:"Submit and add new isolate",onClick:async()=>await k(!1,!1,!0),disabled:!E||o||I,icon:"add",primary:!0,tooltip:f===l.DUPLICATE_ERROR?l.DUPLICATE_ERROR:p||"Submit record and add new record for the same person",loading:"submitAdd"===O},q={label:"Submit",onClick:async()=>await V(!0,!1),disabled:D||I,icon:"done",primary:!0,tooltip:f===l.DUPLICATE_ERROR?l.DUPLICATE_ERROR:p||"Submit record",loading:"submit"===O},G={label:"Save",onClick:async()=>await V(!1,!0),disabled:!P||I,icon:"done",primary:!0,tooltip:f===l.DUPLICATE_ERROR?l.DUPLICATE_ERROR:p||"Submit record",loading:"save"===O},B={label:"Next",onClick:async()=>await k(!0,!1,!1),disabled:o||!!p,icon:"arrow_forward",primary:!0,tooltip:f===l.DUPLICATE_ERROR?l.DUPLICATE_ERROR:p||"Next record",loading:"next"===O},W={label:"Mark Complete",onClick:async()=>await(async e=>{(await ue({event:u,operation:"COMPLETE",dataElements:m,categoryCombos:b,dataSets:v,orgUnit:y.id,programs:g,sampleDate:j,changeStatus:C})).response&&await r(Object(l.submitEvent)(e)),C(!1)})(!1),disabled:o||!!p||I,icon:"done",primary:!0,tooltip:f===l.DUPLICATE_ERROR?l.DUPLICATE_ERROR:p||"Complete Event",loading:"complete"===O},z={label:"Mark Incomplete",onClick:async()=>{(await ue({event:u,operation:"INCOMPLETE",dataElements:m,categoryCombos:b,dataSets:v,sampleDate:j,orgUnit:y.id,programs:g,changeStatus:C})).response&&await r(Object(l.inCompleteEvent)()),C(!1)},disabled:o||!c.editable||i||I,icon:"edit",primary:!0,tooltip:o||!c.editable?"Records with this approval status cannot be edited":"Edit record",loading:"incomplete"===O},F={label:"Edit",onClick:async()=>{(await ue({event:u,operation:"INCOMPLETE",dataElements:m,categoryCombos:b,dataSets:v,sampleDate:j,orgUnit:y.id,programs:g,changeStatus:C})).response&&await r(Object(l.editEvent)()),C(!1)},disabled:o||!c.editable||i||I,icon:"edit",primary:!0,tooltip:o||!c.editable?"Records with this approval status cannot be edited":"Edit record",loading:"edit"===O},$={label:"Back",primary:!0,tooltip:"Go Back",onClick:L},H={label:"Back",primary:!0,tooltip:"Go Back",onClick:L,disabled:!E||o};return n.a.createElement(pe,{buttons:N?a&&!h?d?c.completed?[z,F,$]:M?[W,G,$]:[G,$]:[]:S?[B,$]:_?T?[z,x,H]:[W,x,H]:[q,U,$]:[$]})};var fe=a(1009),me=a(1011),ge=a(1012);function be(e){const[t,a]=Object(r.useState)(!1),o=Object(s.useSelector)(e=>e.data.entity),i=Object(s.useSelector)(e=>e.data.panel),l=Object(s.useSelector)(e=>e.data.event),[c,u]=Object(r.useState)(l.values.tCLjgLjshns),[d,p]=Object(r.useState)(l.values.ZoaXelmyI3P),E=Object(s.useSelector)(e=>e.data.orgUnit),f=[{program:"dzizG8i1cmP",stage:"imi75Ndzv45"},{program:"rMiBliR4FGr",stage:"imi75Ndzv45"},{program:"STe7Xraobt2",stage:"RfR453XFEva"},{program:"gPO5iFsfu3S",stage:"v7ULjKAh14a"},{program:"h6EWlNCpHTz",stage:"pgCOepnav1t"},{program:"Bj4ZJzd9Uz9",stage:"TGjDE8vuPwA"},{program:"BUfpwe2iUQb",stage:"TGjDE8vuPwA"},{program:"zNCtvgxrWxO",stage:"gdY15tam89q"}];return n.a.createElement(n.a.Fragment,null,n.a.createElement(ne.a,{container:!0},n.a.createElement(ne.a,null,n.a.createElement("span",{style:{marginRight:"150px",fontWeight:"bold"}},"Report collection"))),n.a.createElement(ne.a,{container:!0,spacing:2},n.a.createElement(ne.a,{xs:6,style:{textAlign:"left",marginTop:"15px"}},n.a.createElement("span",null,"Have the reports been collected?")),n.a.createElement(ne.a,{xs:6,style:{textAlign:"left"}},n.a.createElement("span",null,n.a.createElement(me.a,{row:!0,"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"",name:"Have the reports been collected?",value:d,onChange:e=>(e=>{p(e.target.value),"true"==e.target.value?a(!0):a(!1);let t=f.find(e=>e.program==i.program),r={dataValues:[{dataElement:"ZoaXelmyI3P",value:e.target.value}],event:l.id,orgUnit:E.id,program:i.program,programStage:t.stage,status:"ACTIVE",trackedEntityInstance:o.id};T.pushEvent(r,l.id,"ZoaXelmyI3P").then(e=>{console.log("success")})})(e)},n.a.createElement(ge.a,{value:"true",control:n.a.createElement(fe.a,null),label:"Yes"}),n.a.createElement(ge.a,{value:"false",control:n.a.createElement(fe.a,null),label:"No"}))))),t||"true"==d?n.a.createElement(ne.a,{container:!0,spacing:2},n.a.createElement(ne.a,{xs:6,style:{textAlign:"left"}},n.a.createElement("span",null,"Report collection date")),n.a.createElement(ne.a,{xs:6,style:{textAlign:"left"}},n.a.createElement("input",{type:"date",id:"date",value:c,onChange:e=>(e=>{u(e.target.value);let t=f.find(e=>e.program==i.program),a={dataValues:[{dataElement:"tCLjgLjshns",value:e.target.value}],event:l.id,orgUnit:E.id,program:i.program,programStage:t.stage,status:"ACTIVE",trackedEntityInstance:o.id};T.pushEvent(a,l.id,"tCLjgLjshns").then(e=>{console.log("sucess")})})(e),name:"Date"}))):"")}const ve=e=>{let{history:t,match:a}=e;const[o,i]=Object(r.useState)(!0),[c,u]=Object(r.useState)(!1),[d,p]=Object(r.useState)(!1),E=Object(s.useDispatch)(),f=Object(s.useSelector)(e=>e.data.status)===l.ERROR,m=Object(s.useSelector)(e=>e.data.panel.valid),b=Object(s.useSelector)(e=>e.data.pageFirst);var v=Object(s.useSelector)(e=>e.data.eventEditable),y=Object(s.useSelector)(e=>e.data.editable);const O=Object(s.useSelector)(e=>e.data.event),h=Object(s.useSelector)(e=>e.data.event.values),S=Object(s.useSelector)(e=>e.metadata.dataElementObjects),_=Object(s.useSelector)(e=>e.metadata.programs),T=Object(s.useSelector)(e=>e.metadata.categoryCombos),P=Object(s.useSelector)(e=>e.metadata.dataSets),j=Object(s.useSelector)(e=>e.data.event.id),A=Object(s.useSelector)(e=>e.data.previousValues);var R=Object(s.useSelector)(e=>e.data.aggregationOnProgress),{sampleDate:I}=Object(s.useSelector)(e=>e.data.panel),w=a.params.orgUnit;const M=a.params.teiId;var[N,C]=Object(r.useState)(!1);Object(r.useEffect)(()=>{"Sterile"!=(null===h||void 0===h?void 0:h.u8VDCIwa3w4)&&"Insignificant Growth"!=(null===h||void 0===h?void 0:h.u8VDCIwa3w4)&&"Commensals"!=(null===h||void 0===h?void 0:h.u8VDCIwa3w4)&&"Growth of contaminants"!=(null===h||void 0===h?void 0:h.u8VDCIwa3w4)||p(!0),b?Y()("#a").hide():(Y()("#a").show(),Y()("#panel").hide()),Y()("#btn").hide(),!0===v&&(Y()("#btn").show(),Y()("#popup").show()),Y()("#msg").hide(),Y()("#success").hide()}),Object(r.useEffect)(()=>{E(Object(l.resetData)()),E(M?Object(l.getExistingEvent)(w,M):Object(l.initNewEvent)(w)),i(!1)},[]),Object(r.useEffect)(()=>{if(j&&y){for(let e in A)""==O.values[e]&&E(Object(l.setEventValue)(e,A[e],!0))}},[j]),Object(r.useEffect)(()=>{A.id&&(E(Object(l.addEntity)()),E(Object(l.resetPreviousEntity)()))},[A]),Object(r.useEffect)(()=>{f&&t.goBack()},[f]),Object(r.useEffect)(()=>{!o&&m&&b&&E(Object(l.createNewEvent)())},[m,b]);const L=e=>{E(Object(l.setAggregationProgress)(e)),R=e},k=e=>{e.preventDefault(),C(!1),Y()("#popup").hide(),Y()("#panel").hide(),Y()("#msg").hide()},V=e=>{window.location.reload(!1),Y()("#popup").hide(),Y()("#panel").hide(),Y()("#cnote").hide()};return o?n.a.createElement(l.TitleRow,{title:"Record",history:t}):n.a.createElement(l.MainSection,{padded:!0},n.a.createElement(l.TitleRow,{title:"Record",history:t}),n.a.createElement("form",{autoComplete:"off"},n.a.createElement(q,{showEdit:!0}),n.a.createElement("div",{id:"a"},n.a.createElement(de,null)),v||y?n.a.createElement("div",{id:"popup"},n.a.createElement(H.a,{style:{width:"90%"},openAnim:{name:"showSweetAlert",duration:2e3},closeAnim:{name:"hideSweetAlert",duration:2e3},customButtons:n.a.createElement(n.a.Fragment,null,n.a.createElement(Ee,{history:t,existingEvent:M}),"\u2003\u2003",n.a.createElement(D.a,{disabled:d,primary:!0,onClick:e=>(e=>{e.preventDefault(),C(!0)})(e)},"Follow-up Notes"),"\u2003\u2003",n.a.createElement("div",{id:"btn"},n.a.createElement(D.a,{destructive:!0,onClick:e=>(e=>{e.preventDefault(),Y()("#msg").show()})(e)},"Delete"),"\u2003\u2003"),n.a.createElement(D.a,{onClick:e=>(e=>{e.preventDefault(),b&&t.goBack(),Y()("#panel").hide(),Y()("#popup").hide()})(e)},"Cancel"))},n.a.createElement(l.Panel,null),n.a.createElement(l.Event,null))):n.a.createElement("div",{id:"panel"},n.a.createElement(l.Panel,{showEdit:m}),n.a.createElement(l.Event,null),n.a.createElement(Ee,{history:t,existingEvent:M}))),N?n.a.createElement(H.a,{style:{width:"60%"},openAnim:{name:"showSweetAlert",duration:2e3},closeAnim:{name:"hideSweetAlert",duration:2e3},customButtons:n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,{primary:!0,onClick:e=>(e=>{e.preventDefault(),u(!0),setTimeout(()=>{u(!1)},2e3)})(e)},"Save"),"\u2003\u2003\u2003",n.a.createElement(D.a,{disabled:R,onClick:e=>k(e)},"Cancel"))},n.a.createElement(be,null)):"",n.a.createElement("div",{id:"msg"},n.a.createElement(H.a,{warning:!0,showCancel:!0,confirmBtnText:"Yes, delete it!",confirmBtnBsStyle:"danger",title:"Are you sure?",customButtons:n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,{disabled:R,primary:!0,onClick:e=>(async e=>{e.preventDefault();let t=localStorage.getItem("eventId"),a=await ue({event:O,operation:"INCOMPLETE",dataElements:S,categoryCombos:T,dataSets:P,orgUnit:w,programs:_,sampleDate:I,changeStatus:L});L(!1),a.response&&(await Object(g.deleteEvent)(t).then(e=>{"OK"==e.httpStatus&&Y()("#success").show()}),Y()("#popup").hide(),Y()("#panel").hide(),Y()("#msg").hide())})(e)},"Yes"),"\u2003\u2003\u2003",n.a.createElement(D.a,{disabled:R,onClick:e=>k(e)},"No"))},"You will not able to recover this event Detail!")),n.a.createElement("div",{id:"success"},n.a.createElement(H.a,{success:!0,title:"Event Delete Success",customButtons:n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,{primary:!0,onClick:e=>V()},"Ok"),"\u2003\u2003\u2003")})),c?n.a.createElement("div",{id:"cnote"},n.a.createElement(H.a,{success:!0,title:"Event save Success",customButtons:n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,{primary:!0,onClick:e=>V()},"Ok"),"\u2003\u2003\u2003")})):"")};Object(u.o)(ve);const ye=["/orgUnit/:orgUnit/event","/orgUnit/:orgUnit/trackedEntityInstances/:teiId"],Oe=()=>n.a.createElement(u.g,null,n.a.createElement(u.d,{exact:!0,path:"/events/:status",render:e=>n.a.createElement(R,e)}),ye.map(e=>n.a.createElement(u.d,{key:e,exact:!0,path:e,render:e=>n.a.createElement(ve,e)})),n.a.createElement(u.d,{render:()=>n.a.createElement(u.c,{from:"/",to:"/events/complete"})}));var he=a(467);const Se=()=>{const e=Object(s.useDispatch)(),t=Object(s.useSelector)(e=>e.metadata.orgUnits);return n.a.createElement(he.OrgUnitTree,{onSelect:t=>e(Object(l.setOrgUnit)(t)),roots:t})};var _e=a(453),Te=a(2),Pe=a(147),je=a(391),Ae=a(93);const Re=e=>{const t=Object(s.useDispatch)(),a=Object(s.useSelector)(e=>e.appConfig.categories),n=Object(s.useSelector)(e=>e.metadata.user),o=Object(s.useSelector)(e=>e.selectedOrgUnit.id),[i,c]=Object(r.useState)(null),[u,d]=Object(r.useState)(!1);return Object(r.useEffect)(()=>{(async()=>{try{const e=await(async(e,t,a)=>{for(const r of e)r.count=(await b(r.sqlViews.count,t,{user:a,status:!!r.param&&r.status}))[0][0];return e.map(e=>e.count)})(a,o,n.username);c(e),u&&d(!1)}catch(e){console.error(e),u||d(!0),t(Object(l.showAlert)("Failed to get record counts.",{critical:!0}))}})()},[o,e,a,t,u,n.username]),[i,u]},De=Object(c.default)(_e.a)`
    .link {
        padding-right: 12px;
    }
    .label {
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
`,Ie=c.default.span`
    padding: 4px;
    background: ${Te.colors.grey300};
    border-radius: 4px;
    margin-left: 8px;
`,we=e=>{let{icon:t,color:a}=e;return n.a.createElement(Ae.Icon,{icon:t,color:a})},Me=e=>{let{location:t}=e;const a=Object(s.useSelector)(e=>e.appConfig.categories),[r,o]=Re(t);return n.a.createElement(Pe.a,null,a.map((e,t)=>n.a.createElement(De,{key:e.status,href:"#/events/"+e.status,icon:n.a.createElement(we,{icon:Ae.icons[e.icon],color:Ae.colors[e.color]}),label:n.a.createElement(n.a.Fragment,null,n.a.createElement("span",null,e.label),n.a.createElement(Ie,null,o?"?":r?r[t]:0))})),n.a.createElement(je.a,null))},Ne=c.default.aside`
    background-color: #fff;
    border-right: 1px solid rgba(0, 0, 0, 0.12);
    min-height: calc(100vh - 48px);
`,Ce=e=>{let{location:t}=e;return n.a.createElement(Ne,null,n.a.createElement(Me,{location:t}),n.a.createElement(Se,null))},Le=()=>n.a.createElement(u.d,{path:"/events",component:Ce}),ke=c.default.section`
    display: flex;
    flex-direction: row;
`,Ve=()=>{const e=Object(s.useDispatch)(),t=Object(s.useSelector)(e=>e.metadata),a=Object(s.useSelector)(e=>e.selectedOrgUnit),o=Object(s.useSelector)(e=>e.metadata.status)===l.ERROR;return Object(r.useEffect)(()=>{var a;t.status===l.READY&&e((a={id:t.orgUnits[0].id,path:t.orgUnits[0].path,displayName:t.orgUnits[0].displayName},e=>e(Object(l.createAction)("ORG_UNIT_SELECTED",a))))},[t.status,t.orgUnits,e]),o||!a?null:n.a.createElement(ke,null,n.a.createElement(Le,null),n.a.createElement(Oe,null))},Ue=Object(l.store)(l.reducers,{appConfig:{categories:[]}}),xe=()=>n.a.createElement(l.App,{appName:"Data Entry",store:Ue},n.a.createElement(l.MetadataLoader,null,n.a.createElement(Ve,null))),qe=document.getElementById("root");i.a.render(n.a.createElement(xe,null),qe),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},97:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.put=t.post=t.get=t.del=void 0;const r="../../../api/";t.get=async e=>await(await fetch(`${r}${e}`,{method:"GET",credentials:"include",headers:{Accept:"application/json"}})).json();t.put=async(e,t)=>await(await fetch(r+e,{method:"PUT",credentials:"include",body:JSON.stringify(t),headers:{Accept:"application/json","Content-type":"application/json"}})).json();t.post=async(e,t)=>await(await fetch(r+e,{method:"POST",credentials:"include",body:JSON.stringify(t),headers:{Accept:"application/json","Content-type":"application/json"}})).json();t.del=async e=>await(await fetch(r+e,{method:"DELETE",credentials:"include",headers:{Accept:"application/json"}})).json()}},[[475,1,2]]]);
//# sourceMappingURL=main.19d7c9f6.chunk.js.map